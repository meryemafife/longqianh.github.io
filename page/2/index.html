<!DOCTYPE html>


<html lang="en">


<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     Peter&#39;s Blog
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/ironman.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

  
  

  

</head>

</html>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="app">
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/IDR_THEME_NTP_BACKGROUND.png" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Peter&#39;s Blog</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-Physics/应用光学" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/02/Physics/%E5%BA%94%E7%94%A8%E5%85%89%E5%AD%A6/"
    >应用光学</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/02/Physics/%E5%BA%94%E7%94%A8%E5%85%89%E5%AD%A6/" class="article-date">
  <time datetime="2020-03-02T01:47:18.000Z" itemprop="datePublished">2020-03-02</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Physics/">Physics</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="应用光学-整理">应用光学 整理</h1>
<h2 id="几何光学基础">1. 几何光学基础</h2>
<ul>
<li><p>全反射 <span class="math display">\[
I=\arcsin{\frac{n_2}{n_1}}
\]</span></p></li>
<li><p>矢量形式的折射定律 <span class="math display">\[
\vec A&#39;=\vec A+P\vec N\\
\]</span> 其中： <span class="math display">\[
\begin{aligned}
P&amp;=(\vec A&#39;-\vec A)\cdot \vec N\\
&amp;=n&#39;\cos I&#39;-n\cos I\\
&amp;=\sqrt{n&#39;^2-n^2\sin ^2 I}-n\cos I
\end{aligned}
\]</span> 且 <span class="math inline">\(\vec A,\vec A’\)</span> 均为单位向量</p></li>
<li><p>矢量形式的反射定律 <span class="math display">\[
\vec A&#39;=\vec A-2(\vec N\cdot \vec A)\vec N
\]</span></p></li>
<li><p>光程</p>
<p>​ 光在介质中所经过的几何路径与该介质折射率的乘积。相当于光在介质中走过路程的时间内，在真空中所走的几何路程。 <span class="math display">\[
\notag
 s=nl=ct
\]</span></p></li>
<li><p>完善成像</p>
<p>​ 等光程上完善成像的物理条件。</p></li>
</ul>
<h2 id="球面与球面系统">2. 球面与球面系统</h2>
<h3 id="单个球面镜成像">单个球面镜成像</h3>
<ul>
<li><p>基本公式 <span class="math display">\[
\begin{aligned}
&amp;\frac{n&#39;}{l&#39;}-\frac{n}{l}=\frac{n&#39;-n}{r}\\
&amp;n&#39;u&#39;-nu=\frac{n&#39;-n}{r}h
\end{aligned}
\]</span></p></li>
<li><p>光焦度 <span class="math display">\[
\phi=\frac{n&#39;-n}{r}=\frac{n&#39;}{f&#39;}=\frac{n}{f}
\]</span></p></li>
<li><p>放大率</p>
<ul>
<li><p>横向 <span class="math display">\[
\beta=\frac{y&#39;}{y}=\frac{l&#39;-r}{l-r}=\frac{nl&#39;}{n&#39;l}
\]</span></p>
<p><span class="math inline">\(\beta&gt;0\)</span> : 虚实不同；<span class="math inline">\(\beta&lt;0\)</span> : 虚实相同。</p></li>
<li><p>轴向 <span class="math display">\[
\alpha=\frac{dl&#39;}{dl}=\frac{nl&#39;^2}{nl^2}
\]</span> 反应像与物的沿轴移动量之比。</p></li>
<li><p>角度 <span class="math display">\[
\gamma=\frac{u&#39;}{u}=\frac{l}{l&#39;}=\frac{n}{n&#39;}\frac{1}{\beta}
\]</span></p></li>
</ul></li>
<li><p>关系 <span class="math display">\[
  \alpha\gamma=\beta
  \]</span></p></li>
<li><p>不变量</p>
<ul>
<li><p>阿贝不变量 <span class="math display">\[
Q=n(\frac{1}{l}-\frac{1}{r})=n&#39;(\frac{1}{l&#39;}-\frac{1}{r&#39;})
\]</span> 阿贝不变量表征界面对某物点发出光线的偏折能力.</p></li>
<li><p>拉赫不变量</p></li>
</ul>
<p><span class="math display">\[
J=nyu=n&#39;y&#39;u&#39;
\]</span> ​ 推导： <span class="math display">\[
\notag
\beta=\frac{y&#39;}{y}=\frac{nl&#39;}{n&#39;l}=\frac{nu}{n&#39;u&#39;}\implies nyu=n&#39;y&#39;u&#39;
\]</span></p>
<p>​ <span class="math inline">\(J\)</span> 大，成像范围大，成像孔径角大，传输光能多。</p>
<p>​ 拉赫不变量表征光学系统的成像能力.</p></li>
</ul>
<h3 id="反射球面球面镜">反射球面（球面镜）</h3>
<ul>
<li><span class="math inline">\(n’=-n\)</span></li>
</ul>
<h2 id="平面和平面系统">3. 平面和平面系统</h2>
<h3 id="平面镜">平面镜</h3>
<ul>
<li>奇次反射成镜像，偶次反射成一致像</li>
<li>若反射光线不动，平面镜转 <span class="math inline">\(\alpha\)</span> 角，则反射光线转 <span class="math inline">\(2\alpha\)</span> 角</li>
</ul>
<h3 id="双平面镜">双平面镜</h3>
<ul>
<li>夹角为 <span class="math inline">\(\alpha\)</span> 的双平面镜系统，物与二次反射后所成像的夹角为 <span class="math inline">\(2\alpha\)</span> .</li>
<li>入射光线与反射光线的夹角为 <span class="math inline">\(2\alpha\)</span> .</li>
</ul>
<h3 id="平行平板">平行平板</h3>
<ul>
<li><p>近轴横向位移公式 <span class="math display">\[
\Delta l&#39;=d(1-\frac{1}{n})
\]</span></p></li>
<li><p>近轴纵向位移公式 <span class="math display">\[
\Delta t&#39;=di(1-\frac{1}{n})
\]</span> <span class="math inline">\(i\)</span> 为入射角 .</p></li>
</ul>
<h3 id="反射棱镜">反射棱镜</h3>
<ul>
<li><p>结构常数</p>
<p>​ 光轴在棱镜中的长度与棱镜通光口径之比 <span class="math display">\[
K=\frac{d}{D}
\]</span></p></li>
<li><p>五角棱镜 <span class="math display">\[
K=2+\sqrt{2}
\notag
\]</span></p></li>
<li><p>达夫棱镜 <span class="math display">\[
K=\frac{1}{\sin(45^{\circ}-i)}
\notag
\]</span></p>
<p>达夫棱镜的重要性质在于当它绕平行于反射面的轴转 <span class="math inline">\(\alpha\)</span> 角时，物体的反射像将转过 <span class="math inline">\(2\alpha\)</span> 角。</p></li>
<li><p>屋脊棱镜</p>
<p>可以增加一次反射，改变像坐标系的左右旋向。</p></li>
<li>由物坐标求像坐标
<ul>
<li>光轴方向 <span class="math inline">\(z’\)</span> 不变</li>
<li>垂直于主截面的坐标 <span class="math inline">\(x’\)</span> 视屋脊个数而定：奇数个倒转，偶数个不变。 或者：沿方向画一画确定</li>
<li><span class="math inline">\(y’\)</span> 坐标根据总反射次数而定：奇数次变左手系。</li>
</ul></li>
<li><p>角锥棱镜</p>
<ul>
<li><p>从底面以任意方向入射的光线，经三个反射面顺序反射后，以与入射光线相反的方向从底面射出。</p></li>
<li>当棱镜角以角顶为中心向任意方向偏转时，出射光线方向不变。</li>
<li>用</li>
<li><p>矢量形式的反射定律证明</p></li>
</ul></li>
</ul>
<h3 id="折射棱镜">折射棱镜</h3>
<p><img src="https://tva1.sinaimg.cn/large/00831rSTly1gcv1smbisuj30ad06t0sr.jpg" style="zoom: 67%;" /></p>
<ul>
<li><p>偏角公式 <span class="math display">\[
\sin(\frac{\alpha+\delta_{min}}{2})=n\sin\frac{\alpha}{2}
\]</span> 此时 <span class="math inline">\(I_1=-I_2’, I’_1=-I_2\)</span> .</p></li>
<li><p>近轴简化：入射角有一定大小，折射角 <span class="math inline">\(\alpha\)</span> 很小 <span class="math display">\[
\delta=\alpha\big(n\frac{\cos I&#39;_1}{\cos I_1}-1\big)
\]</span></p></li>
<li><p>近轴简化：入射角很小，折射角很小 <span class="math display">\[
\delta=(n-1)\alpha
\]</span></p></li>
</ul>
<h2 id="理想光学系统">4. 理想光学系统</h2>
<figure>
<img src="https://tva1.sinaimg.cn/large/00831rSTly1gd5cgjb5nej32720rstdm.jpg" alt="image-20200324211216424" /><figcaption>image-20200324211216424</figcaption>
</figure>
<p>​ 理想光学系统，就是能对任意宽空间内的点以任意宽的光束成完善像的光学系统。</p>
<h3 id="基本概念">（1）基本概念</h3>
<ul>
<li>主点、主平面</li>
<li>节点</li>
<li>基点</li>
<li>焦物距、焦像距</li>
<li>光焦度：折合焦距的倒数</li>
<li>视觉放大率</li>
<li>物距<span class="math inline">\(\ell\)</span> : 主点到物点到距离，像距<span class="math inline">\(\ell&#39;\)</span> : 主点到像点到距离</li>
</ul>
<h3 id="作图技巧">（2）作图技巧</h3>
<ul>
<li><p>辅助光线：</p>
<ul>
<li>平行光轴入射</li>
<li>过物方焦点入射</li>
<li>过节点入射</li>
</ul></li>
<li><p>依据：</p>
<ul>
<li><p>倾斜光轴入射的平行光束过系统后会聚雨像方焦平面</p></li>
<li><p>物方焦平面上一点发出的光束经系统后相互平行</p></li>
<li><p>光线与物方、像方主面 的交点，其高度相等</p></li>
</ul></li>
</ul>
<h3 id="公式荟萃">（3）公式荟萃</h3>
<h4 id="焦距">焦距</h4>
<p>单个光组： <span class="math display">\[
\begin{aligned}
(基本)\quad &amp;f&#39;=\frac{h}{u&#39;},\quad f=\frac{h}{u}\\
(牛顿公式)\quad &amp; xx&#39;=ff&#39;\\
(高斯公式)\quad &amp;\frac{f&#39;}{l&#39;}+\frac{f}{l}=1\\
&amp;\beta=-\frac{f}{x}=-\frac{x&#39;}{f&#39;}\\
&amp;\frac{f&#39;}{f}=-\frac{n&#39;}{n}\\
&amp; \varphi=\frac{n&#39;}{f&#39;}=-\frac{n}{f}
\end{aligned}
\]</span> 两个光组： <span class="math display">\[
\begin{aligned}
(牛顿公式)\quad &amp;x_F&#39;=\frac{f_2 f_2&#39;}{\Delta},x_F=\frac{f_1 f_1&#39;}{\Delta} \\
(三角形相似)\quad &amp; f&#39;=-\frac{f_1&#39; f_2&#39;}{\Delta},f=\frac{f_1 f_2}{\Delta}\\ 
&amp;\Delta=d-f_1&#39;-f_2&#39;
\end{aligned}
\]</span></p>
<p>多个光组（<span class="math inline">\(k\)</span> 个）： <span class="math display">\[
\begin{aligned}
&amp;f&#39;=\frac{h_1}{u_k&#39;}\\
(截距计算法) \quad &amp;f&#39;=\frac{l_1&#39;l_2&#39;\cdots l_l&#39;}{l_2l_3\cdots l_k}\\
\end{aligned}
\]</span></p>
<p>​ 截距计算法：令 <span class="math inline">\(l_1=-\infty\)</span> , 对每一个光组重复应用高斯公式求得物距像距，最后可推出总焦距。</p>
<p>望远镜系统： 将第二系统的焦距扩大到 <span class="math inline">\(\Gamma\)</span> 倍。（把远处物体拉近到感觉，张角变大了）</p>
<h4 id="焦物距焦像距">焦物距/焦像距</h4>
<p>牛顿公式、截距计算法。</p>
<p>单个光组： <span class="math display">\[
\begin{aligned}
&amp;xx&#39;=ff&#39;\\
&amp;\beta=-\frac{x&#39;}{f&#39;}=-\frac{f}{x}\\
(焦距-焦物距-物距)\quad &amp;x=l-f,x&#39;=l&#39;-f&#39;
\end{aligned}
\]</span></p>
<p>两个光组：</p>
<p>​ 对第一光组，焦像距 <span class="math inline">\(x&#39;=\Delta\)</span>, 对第一光组，焦物距 <span class="math inline">\(x=-\Delta\)</span> <span class="math display">\[
x_F&#39;=-\frac{f_2f_2&#39;}{\Delta},x_F=\frac{f_1f_1&#39;}{\Delta}
\notag
\]</span></p>
<h4 id="放大率">放大率</h4>
<p>$$ \begin{aligned} &amp;==-=-\ (轴向放大率)&amp; =-\ &amp;=\ (两个光组) &amp; =-=\ (重要，常用) &amp;= l=</p>
<p>\end{aligned} $$</p>
<h4 id="光焦度">光焦度</h4>
<p><span class="math display">\[
\begin{aligned}
(定义)\quad &amp;\phi=\frac{n&#39;}{f&#39;}=-\frac{n}{f}\\
(空气中,双光组)\quad &amp;\phi=\phi_1+\phi_2-d\phi_1\phi_2\\
(空气中，多光组)\quad &amp;\phi=\frac{1}{h_1}\sum_{i=1}^k h_i\phi_i
\end{aligned}
\]</span></p>
<h4 id="正切计算法">正切计算法</h4>
<p><img src="https://tva1.sinaimg.cn/large/00831rSTly1gd5bun7wn4j329a0rsjvx.jpg" alt="image-20200324211447349" style="zoom: 25%;" /></p>
<p><img src="https://tva1.sinaimg.cn/large/00831rSTly1gd5bp3fc1kj31xe0rsn21.jpg" alt="image-20200324210927813" style="zoom:25%;" /></p>
<p>顺着光路走下去。关键是一步一步地求 <span class="math inline">\(h\)</span> 和 <span class="math inline">\(u\)</span> . $$ \begin{aligned} &amp;-=u_1'-u_1=,u_2'-u_2=,, u'<em>k-u</em>{k}=\ &amp;u_i=u'<em>{i-1}\ &amp;l_i=l'</em>{i-1}-d_i h_i=h_{i-1}-d_{i-1}u'_{i-1}\</p>
<p>\end{aligned} $$</p>
<h3 id="透镜">（4）透镜</h3>
<h2 id="光束限制">5. 光束限制</h2>
<h3 id="孔径光阑">孔径光阑</h3>
<h3 id="视场光阑">视场光阑</h3>
<h3 id="渐晕光阑">渐晕光阑</h3>
<h3 id="景深">景深</h3>
<h2 id="光度学基础">6. 光度学基础</h2>
<h3 id="基本术语">基本术语</h3>
<ul>
<li>以电磁辐射形式发射、传输或接收的能量：辐射能 <span class="math inline">\(Q_e\)</span></li>
<li><p>单位时间内发射、传输或接收的辐射能：辐射通量 / 辐射功率 <span class="math inline">\(\Phi_e\)</span></p></li>
<li><p>辐射通量中人眼能感受到的部分：光通量 <span class="math inline">\(\Phi_v\)</span> （单位为流明 lm ）</p></li>
<li>某一方向上单位立体角的光通量：发光强度 <span class="math inline">\(I_v\)</span> （单位为坎德拉 cd ）</li>
<li>（垂直方向）单位面积接受的光通量：光照度 <span class="math inline">\(E_v\)</span> (单位为勒克斯 lx )</li>
<li>（垂直方向）单位面积发出的光通量：光出射度 <span class="math inline">\(M_v\)</span></li>
<li><p>光源发光投影到某一方向上单位面积的发光强度：光亮度 <span class="math inline">\(L_v\)</span> （单位为尼特 nt ）</p></li>
</ul>
<p>理解：光照度表征表面接受的光的性质；光亮度表征光源的发光性质，用立体角度量，而且是单位面积，是一个比光出射度更好的光源发光性质描述。</p>
<h3 id="辅助量和联系量">辅助量和联系量</h3>
<ul>
<li>立体角
<ul>
<li><span class="math inline">\(\Omega=\displaystyle\frac{S}{r^2}\)</span></li>
<li><span class="math inline">\(d \Omega=\sin i \cdot di\cdot d\phi\)</span></li>
<li><span class="math inline">\(\Omega=\displaystyle\iint_S \sin i did\phi=(\phi_{\max}-\phi_{\min})(\cos i_{\min}-\cos i_{\max})\)</span></li>
<li>平面孔径角 <span class="math inline">\(U\)</span>, <span class="math inline">\(\Omega=\displaystyle\int_0^{2\pi}d\phi\int_0^U\sin i di=4\pi \sin^2\left(\frac U 2\right)\approx \pi u^2\)</span></li>
</ul></li>
<li><p>光谱光视效率 / 视见函数 <span class="math inline">\(V(\lambda)\)</span></p>
<p>​ 反映人眼的光谱灵敏度，表示人眼对不同波长辐射对敏感度差异。</p>
<p>​ 和辐射通量直接的换算： <span class="math inline">\(1W\)</span>（辐射通量）<span class="math inline">\(=683\cdot V(\lambda)\)</span> lm</p></li>
<li><p>发光效率 <span class="math inline">\(\eta\)</span></p>
<p>​ 辐射体发出的总光通量与该光源的耗电功率之比。</p>
<p>​ <span class="math inline">\(\eta=\displaystyle\frac{\Phi_v}{P}\)</span></p></li>
</ul>
<h3 id="重要关系">重要关系</h3>
<ul>
<li><p>光亮度 : <span class="math inline">\(L_v=\displaystyle\frac{I_v}{dA\cos i}=\frac{d\Phi_v}{d\Omega dA\cos i}\)</span></p></li>
<li><p>朗伯辐射体且面积为 <span class="math inline">\(A\)</span> : <span class="math inline">\(I_N=L_vA\)</span></p></li>
<li><p>朗伯辐射体已知光出射度或二次辐射源 : <span class="math display">\[
L_v=\frac{M_v}{\pi}=\frac{\rho E_v}{\pi}
\]</span></p></li>
</ul>
<h3 id="基本定律">基本定律</h3>
<h4 id="朗伯定律">朗伯定律</h4>
<p>一个光亮度再各个方向上均相等的发光面源（朗伯辐射体），在某一方向上的发光强度等于该面元法线方向上的发光强度与方向角余弦之积。 <span class="math display">\[
I_i=I_N\cos i
\]</span></p>
<ul>
<li><p>朗伯辐射体在孔径角 <span class="math inline">\(U\)</span> 范围内发出的光通量 <span class="math display">\[
\begin{align}
d\Phi_v&amp;=L_v\cos i dAd\Omega\notag \\
\implies \Phi_v&amp;=\int_0^{2\pi}d\phi\int_0^UL_v\sin i\cos idA di\notag \\
&amp;=\pi L_v\sin^2 U dA\\
&amp;=\pi I\sin^2 U(?)
\end{align} 
\]</span></p></li>
<li><p>孔径角为 <span class="math inline">\(\displaystyle \frac \pi 2\)</span> 时（平面），<span class="math inline">\(L_v=\displaystyle \frac{\Phi_v }{\pi dA}=\frac{M_v}{\pi}\)</span></p></li>
</ul>
<h4 id="距离平方反比定律">距离平方反比定律</h4>
<p>点光源直接照射表面时，受照面光照度为 <span class="math display">\[
E_v=\frac{I_v}{r^2}
\]</span></p>
<h4 id="照度余弦定则">照度余弦定则</h4>
<p>光源不垂直于照明面元时的光照度为 <span class="math display">\[
E_v=\frac{I_0\cos i}{r^2}=E_v\cos i
\]</span></p>
<h3 id="光束光亮度的传递">光束光亮度的传递</h3>
<ul>
<li>面光源照射时受照表面的光照度</li>
</ul>
<p><span class="math display">\[
E_v=\frac{L_v d S_1\cos i_1\cos i_2}{r^2}
\]</span></p>
<p><span class="math inline">\(i_1,i_2\)</span> 分别为两面法线与距离 <span class="math inline">\(\vec r\)</span> 直接的夹角。</p>
<ul>
<li><p>光在无损介质中传播时，各截面上的光亮度相等。</p></li>
<li><p>不同介质分界面上光束的传递 :</p></li>
</ul>
<p>$$ <span class="math display">\[\begin{align}
  \rho&amp;\approx\left(\frac{n&#39;-n}{n&#39;+n}\right)^2,\tau=1-\rho\\
  L_r&amp;=\rho L_i\\
  L_t&amp;=\left(\frac{n&#39;}{n}\right)^2\tau L_i


  \end{align}\]</span> $$</p>
<h3 id="光学成像系统的像面照度">光学成像系统的像面照度</h3>
<h4 id="轴上像点">轴上像点</h4>
<p><span class="math display">\[
\begin{align}
E_0&#39;&amp;=\frac{\Phi_v&#39;}{dS&#39;}=\tau \frac{\pi L_v \sin^2 U dS}{dS&#39;}\\
&amp;=\frac{1}{\beta^2}\tau \pi L_v\sin^2 U &amp;\text{(物空间)}\\
&amp;=\left(\frac{n&#39;}{n}\right)^2\tau\pi L_v\sin^2 U&#39; &amp;\text{(像空间)}\\
\end{align}
\]</span></p>
<p>其中用到正弦关系：<span class="math inline">\(ny\sin U=n’y’\sin U&#39;\)</span></p>
<h4 id="轴外像点">轴外像点</h4>
<p>设轴外像点 <span class="math inline">\(B’\)</span> 的像方视场角（对出瞳的张角）为 <span class="math inline">\(\omega&#39;\)</span> $$ <span class="math display">\[\begin{align}
\sin U_B&#39;&amp;\approx \sin U&#39;\cos ^2\omega\\
E_B&#39;&amp;=E_0\cos^4\omega&#39;

\end{align}\]</span> $$</p>
<h1 id="应用光学实验">应用光学实验</h1>
<h2 id="手机摄像头焦距测量">手机摄像头焦距测量</h2>
<h3 id="通用知识手机">通用知识（手机）</h3>
<ul>
<li><p>手机摄像头近似认为是薄透镜</p></li>
<li><p>视场光阑：CMOS光敏面最外面一圈</p></li>
<li><p>一般手机数值孔径：广角～1.8，数值越小难度越大；长焦～2.4，大的到2.8</p></li>
<li><p>一般手机焦距： 4～6mm</p></li>
<li><p>等效焦距</p>
<ul>
<li><p>同样焦距的镜头，在不同尺寸的感光元件上，成像视角不同，仅以镜头的物理焦距，无法比较不同相机的成像范围（视场角）。</p></li>
<li><p>为了便于比较，人们习惯将不同尺寸感光元件上成像的视角，转化为 <em>36 x 24 mm 全画幅感光元件上同样成像视角所对应的镜头焦距</em>，这个转化后的焦距就是等效焦距</p></li>
<li><p>物理焦距 <span class="math inline">\(\times\)</span> 转换系数 <span class="math inline">\(=\)</span> 等效焦距，</p>
<p>其中 转换系数 <span class="math inline">\(=\)</span> 43.27 ( 全画幅对角线长) <span class="math inline">\(/\)</span> 传感器光面对角线长</p></li>
<li><p>手机的等效焦距有个坑，1英寸手机厂商这里是 16 mm ，而不是 25.4 mm</p></li>
</ul></li>
</ul>
<h3 id="iphone-x-实验手机">iPhone X (实验手机)</h3>
<ul>
<li><p>iPhone X 后置摄像头</p>
<ul>
<li>主摄：广角 $F/1.8 $</li>
<li>副摄：长焦 <span class="math inline">\(F/2.4\)</span></li>
</ul></li>
<li><p>CMOS : IMX385 1.22 µm</p></li>
<li><p>正常拍照模式下一倍变焦用的是广角镜头，二倍变焦用的长焦镜头，人像模式下是两个镜头同时使用，后台计算像场和景深。另外，<strong>长焦镜头使用了更小的光圈，因此需要更多的光线</strong>，苹果让 iPhone 自己来判定光线是否足够，从而启动长焦镜头。</p></li>
<li><p>物方视场角 FOV：视场角分物方视场角和像方视场角。一般光学设备的使用者关心的是物方视场角。</p>
<p>对于大多数光学仪器,视场角的度量都是以成像物的直径作为视场角计算的。</p></li>
<li><p>光瞳直径 <span class="math inline">\(=\)</span> 焦距 <span class="math inline">\(/\)</span> 光圈数 <span class="math inline">\(F\)</span></p></li>
</ul>
<h3 id="实验方法">实验方法</h3>
<ul>
<li><p>找一张白纸，用直尺画上一条直线，我画的是 150 mm <span class="math inline">\(\implies l=-150\)</span></p></li>
<li><p>直线一端直立放一把尺子，另一端放手机</p></li>
<li><p>一倍正常拍摄一张，用的是主（广角）镜头；二倍数字变焦放大拍摄一张，用的是副（长焦）镜头</p></li>
<li><p>隔空投送到电脑上，用 PhotoShop 寻找尺子 1cm～2cm 的像素距离。</p>
<p>具体方法为：Ctrl+R 出现横纵坐标轴，在坐标轴上右键选像素，变成像素坐标。在 1cm～2cm 画一个矩形，记录像素距离</p></li>
<li><p>查找 CMOS 传感器的 unit cell （比如 IMX363 2.4 µm 一个像素点）, 计算实际像高</p></li>
<li><p>由 <span class="math inline">\(\displaystyle \beta=\frac{y’}{y}=\frac{l’}{l}\)</span> 得到像距 <span class="math inline">\(l’\)</span> ，有了 <span class="math inline">\(l’\)</span> 其他的都可以算了</p></li>
<li><p>焦距 <span class="math inline">\(f’=\displaystyle\frac{1}{1/l’-1/l}\)</span> （高斯公式）</p></li>
<li><p>光瞳直径 <span class="math inline">\(\displaystyle D=\frac{f’}{F}\)</span> ，<span class="math inline">\(F\)</span> 为光圈数</p></li>
<li><p>物方视场角 <span class="math inline">\(\displaystyle FOV=2\arctan\left(\frac{d/2}{l&#39;}\right)\)</span> 其中 <span class="math inline">\(d\)</span> 为传感器对角线长</p></li>
</ul>
<h3 id="实验代码">实验代码</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_l1</span><span class="hljs-params">(px, unit, y=<span class="hljs-number">10</span>)</span>:</span><br>        <span class="hljs-comment"># 计算像高y1,像距l1</span><br>    l = <span class="hljs-number">150</span><br>    y1 = px * unit / <span class="hljs-number">1000</span><br>    beta = y1 / y<br>    l1 = beta * l<br>    <span class="hljs-keyword">return</span> y1, l1<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_f</span><span class="hljs-params">(l1, l)</span>:</span><br>        <span class="hljs-comment"># 计算焦距</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> / (<span class="hljs-number">1</span> / l1 + <span class="hljs-number">1</span> / l)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_diaglen</span><span class="hljs-params">(x, y)</span>:</span><br>        <span class="hljs-comment"># 获得对角线长度</span><br>    <span class="hljs-keyword">return</span> np.sqrt(x**<span class="hljs-number">2</span> + y**<span class="hljs-number">2</span>)<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_FOV</span><span class="hljs-params">(diag, l1)</span>:</span><br>        <span class="hljs-comment"># 计算物方视场角</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * np.arctan(diag / <span class="hljs-number">2</span> / l1) * <span class="hljs-number">180</span> / np.pi<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_D</span><span class="hljs-params">(f, F)</span>:</span><br>        <span class="hljs-comment"># 获得光瞳直径</span><br>    <span class="hljs-keyword">return</span> f / F<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">r</span><span class="hljs-params">(x, N=<span class="hljs-number">4</span>)</span>:</span><br>        <span class="hljs-comment"># 保留四位小数</span><br>    <span class="hljs-keyword">return</span> round(x, N)<br><br><br>px1 = <span class="hljs-number">237</span><br>px2 = <span class="hljs-number">432</span><br>F1 = <span class="hljs-number">1.8</span><br>F2 = <span class="hljs-number">2.4</span><br>unit = <span class="hljs-number">1.22</span><br>l = <span class="hljs-number">150</span><br>diag = <span class="hljs-number">6.15</span><br>trans = <span class="hljs-number">43.27</span> / diag<br><br>y1, l1 = get_l1(px1, unit)<br>y2, l2 = get_l1(px2, unit)<br>f1 = get_f(l1, l)<br>f2 = get_f(l2, l)<br>D1 = get_D(f1, F1)<br>D2 = get_D(f2, F2)<br>FOV1 = get_FOV(diag, l1)<br>FOV2 = get_FOV(diag, l2)<br><span class="hljs-comment"># diag = get_diaglen(5.21, 6.29)</span><br><br><span class="hljs-comment"># print('传感器对角线长：', round(diag, 4))</span><br><br>print(<span class="hljs-string">'--广角--'</span>)<br>print(<span class="hljs-string">'焦距：'</span>, r(f1))<br>print(<span class="hljs-string">'等效焦距'</span>, r(trans * f1))<br>print(<span class="hljs-string">'物方视场角：'</span>, r(FOV1))<br>print(<span class="hljs-string">'光瞳直径: '</span>, r(D1))<br>print()<br>print(<span class="hljs-string">'--长焦--'</span>)<br>print(<span class="hljs-string">'焦距：'</span>, r(f2))<br>print(<span class="hljs-string">'等效焦距'</span>, r(trans * f2))<br>print(<span class="hljs-string">'物方视场角：'</span>, r(FOV2))<br>print(<span class="hljs-string">'光瞳直径: '</span>, r(D2))<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_err</span><span class="hljs-params">(y1)</span>:</span><br>    l0 = <span class="hljs-number">1</span> / (<span class="hljs-number">1</span> / <span class="hljs-number">4</span> - <span class="hljs-number">1</span> / <span class="hljs-number">150</span>)<br>    y0 = <span class="hljs-number">10</span> * l0 / <span class="hljs-number">150</span>  <span class="hljs-comment"># 10mm原像,150物距</span><br>    <span class="hljs-keyword">return</span> np.abs(y0 - y1) / y0<br><br><br>print()<br>print(<span class="hljs-string">'--误差计算--'</span>)<br><br>err_y = get_err(y1)<br>print(<span class="hljs-string">'像高误差-主镜头:'</span>, r(err_y) * <span class="hljs-number">100</span>, <span class="hljs-string">'%'</span>)<br>print(<span class="hljs-string">'焦距误差-主镜头'</span>, r(np.abs((f1 - <span class="hljs-number">4.0</span>)) / <span class="hljs-number">4.0</span>) * <span class="hljs-number">100</span>, <span class="hljs-string">'%'</span>)<br>beta1 = l1 / l<br>print()<br>print(<span class="hljs-string">'--放大倍率计算--'</span>)<br>print(<span class="hljs-string">'横向放大倍率'</span>, r(beta1))<br>print(<span class="hljs-string">'显示图像放大倍率'</span>, r(<span class="hljs-number">143.6</span> / (beta1 * <span class="hljs-number">10</span>)))<br></code></pre></td></tr></table></figure>
<h5 id="结果">结果</h5>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">--广角--<br>焦距： <span class="hljs-number">4.2152</span><br>等效焦距 <span class="hljs-number">29.6573</span><br>物方视场角： <span class="hljs-number">70.6732</span><br>光瞳直径:  <span class="hljs-number">2.3418</span><br><br>--长焦--<br>焦距： <span class="hljs-number">7.5098</span><br>等效焦距 <span class="hljs-number">52.8373</span><br>物方视场角： <span class="hljs-number">42.5086</span><br>光瞳直径:  <span class="hljs-number">3.1291</span><br><br>--误差计算--<br>像高误差-主镜头: <span class="hljs-number">5.54</span> %<br>焦距误差-主镜头 <span class="hljs-number">5.38</span> %<br><br>--放大倍率计算--<br>横向放大倍率 <span class="hljs-number">0.0289</span><br>显示图像放大倍率 <span class="hljs-number">496.6452</span><br></code></pre></td></tr></table></figure>
<h2 id="利用单反相机测量光度学参数">利用单反相机测量光度学参数</h2>
<ol type="1">
<li><p>相机没有镜头无法成像，相机的光学传感器需要一个实像。</p></li>
<li><p>灰度值与亮度</p></li>
<li><p><span class="math inline">\(\gamma\)</span> 矫正：</p>
<ul>
<li>能量 <span class="math inline">\(=\)</span> 功率 <span class="math inline">\(\times\)</span> 时间 <span class="math inline">\(\implies\)</span> 景物亮度 <span class="math inline">\(\propto\)</span> 快门时间 ,</li>
<li>图片亮度 <span class="math inline">\(\propto\)</span> 图片灰度</li>
<li><span class="math inline">\(\implies\)</span> 图片灰度 $$ 快门时间</li>
<li>但是实际的图片灰度和快门时间是非线性的，这是由于相机对图片进行了处理</li>
<li>存储时为了压缩动态范围 做了1/2.2的处理</li>
<li>显示还原时再进行2.2的处理</li>
<li>我们做图得到灰度平方后和快门速度成正比 说明存储时做了1/2 的处理</li>
<li><a href="色彩校正中的%20gamma%20值是什么？%20-%20疾风齿轮的回答%20-%20知乎%20https://www.zhihu.com/question/27467127/answer/123239180">好的理解在此</a></li>
</ul>
<p>曝光指数 EI</p></li>
</ol>
<h2 id="应用光学讨论">应用光学讨论</h2>
<ol type="1">
<li>双目镜筒加反射棱镜，为什么加平行平板？</li>
</ol>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gep1asih0cj30sg0rsh0c.jpg" alt="image-20200512014117116" style="zoom:25%;" /></p>
<ol start="2" type="1">
<li><p>放大镜的视觉放大率是什么？或者不是什么？还是什么也不是？</p></li>
<li><p>在考虑显微镜的有效放大率的时候，人眼的最小分辨角取了<span class="math inline">\(2’\sim 4’\)</span>, 为什么取 <span class="math inline">\(2’\)</span> 到 <span class="math inline">\(4’\)</span>, 为什么有一个下限有一个上限？（相关：物理光学中的伪分辨）</p></li>
<li><p>暗视场照明可以观察小于分辨极限的微小质点，这种情况是否可以看作“超分辨”？（在直播回放appopt-10-2的1:31:00左右）</p></li>
<li><p><span class="math inline">\(50\%\)</span> 渐晕时，怎么得到的下面这个公式：</p></li>
</ol>
<p><span class="math display">\[
\tan W=\frac{p}{2\Gamma f_1^\prime+f_2^\prime+\Gamma l_p^{\prime}}
\]</span></p>
<ol start="5" type="1">
<li><p>焦距、孔径、视场为什么可以表征光学系统性能？（提示：结合拉氏不变量）</p></li>
<li><p>场镜对总光焦度无贡献，其焦距是否可随意确定？</p></li>
</ol>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  

  
  
  

</article>
    
    <article id="post-Computer-Sciences/Leetcode" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/02/Computer-Sciences/Leetcode/"
    >Leetcode</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/02/Computer-Sciences/Leetcode/" class="article-date">
  <time datetime="2020-03-01T17:08:57.000Z" itemprop="datePublished">2020-03-02</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Computer-Science/">Computer Science</a> / <a class="article-category-link" href="/categories/Computer-Science/Practice/">Practice</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="leecode-题目整理">Leecode 题目整理</h1>
<h3 id="三数之和">三数之和</h3>
<p>排序+<strong>双指针</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">nums.sort()<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(n):<br>  <span class="hljs-keyword">if</span> i&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">and</span> nums[i] == nums[i - <span class="hljs-number">1</span>]:	<span class="hljs-keyword">continue</span><br>  l = i + <span class="hljs-number">1</span><br>  r = n - <span class="hljs-number">1</span><br>  <span class="hljs-keyword">while</span>(l &lt; r):<br>    <span class="hljs-keyword">if</span> nums[i] + nums[l] + nums[r] == <span class="hljs-number">0</span>:<br>      ans.append([nums[i], nums[l], nums[r]])<br>      <span class="hljs-keyword">while</span> l&lt;r <span class="hljs-keyword">and</span> nums[r]==nums[r<span class="hljs-number">-1</span>]:	r=r<span class="hljs-number">-1</span><br>      <span class="hljs-keyword">while</span> l&lt;r <span class="hljs-keyword">and</span> nums[l]==nums[l+<span class="hljs-number">1</span>]:	l=l+<span class="hljs-number">1</span><br>      r=r<span class="hljs-number">-1</span><br>      l=l+<span class="hljs-number">1</span><br>    <span class="hljs-keyword">elif</span> nums[i] + nums[l] + nums[r] &gt; <span class="hljs-number">0</span>:	r = r - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>: l = l + <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
<h3 id="两数之和">两数之和</h3>
<p><strong>carry</strong> 用得很妙, 模拟进位</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">addTwoNumbers</span><span class="hljs-params">(self, l1: ListNode, l2: ListNode)</span> -&gt; ListNode:</span><br>  ans=ListNode(<span class="hljs-number">0</span>)<br>  head=ans<br>  carry=<span class="hljs-number">0</span><br>  <span class="hljs-keyword">while</span> l1 <span class="hljs-keyword">or</span> l2:<br>  	x=l1.val <span class="hljs-keyword">if</span> l1 <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>  	y=l2.val <span class="hljs-keyword">if</span> l2 <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>  	s=x+y+carry<br>  	carry=s//<span class="hljs-number">10</span><br>  	ans.next=ListNode(s%<span class="hljs-number">10</span>)<br>  	ans=ans.next<br>  	<span class="hljs-keyword">if</span> l1:<br>  		l1=l1.next<br>  	<span class="hljs-keyword">if</span> l2:<br>  		l2=l2.next<br>  	<span class="hljs-keyword">if</span> carry:<br>  		ans.next=ListNode(carry)<br>  <span class="hljs-keyword">return</span> head.next<br></code></pre></td></tr></table></figure>
<h2 id="队列">队列</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#简易版本</span><br>queue=[]<br>queue.append(data) <span class="hljs-comment">#入队</span><br>queue.pop(<span class="hljs-number">0</span>)	<span class="hljs-comment">#出队</span><br><br><span class="hljs-comment">#双向队列</span><br><span class="hljs-keyword">import</span> collections<br>que=collectione.deque()<br>que.append() <br>que.appendleft()<br>que.insert(i,x)<span class="hljs-comment">#在第i个位置插入x</span><br>que.popleft()<br>que.pop()<br>que.remove(val)<span class="hljs-comment">#移除查找到的第一个val</span><br>que.count(x)<span class="hljs-comment">#计算que中元素等于x的个数</span><br>que.rotate(n)<span class="hljs-comment">#向右循环移动n步 </span><br>que.clear()<br></code></pre></td></tr></table></figure>
<h3 id="墙与门">墙与门</h3>
<p>BFS</p>
<p>满足条件=&gt;处理=&gt;放入队列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">used=[]<span class="hljs-comment">#走过的标记不再走</span><br>rooms[tmpk][tmpt] = rooms[i][j] + <span class="hljs-number">1</span> <span class="hljs-comment">#step是上一个的加1</span><br></code></pre></td></tr></table></figure>
<h3 id="岛屿数量">岛屿数量</h3>
<p>BFS ：</p>
<p>写个bfs函数，注意每到一个点要mark。</p>
<p>对所有可遍历点bfs（同步更新可遍历点）, 每使用一次就找到了一个模块, cnt++。</p>
<p><strong>并查集（未）</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">bfs</span><span class="hljs-params">(i, j)</span>:</span><br> queue = deque()<br> queue.appendleft((i, j))<br> grid[i][j] = <span class="hljs-string">"0"</span><br> <span class="hljs-keyword">while</span> queue:<br>   i, j = queue.pop()<br>   <span class="hljs-keyword">for</span> x, y <span class="hljs-keyword">in</span> [[<span class="hljs-number">-1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">-1</span>], [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]]:<br>    tmp_i = i + x<br>    tmp_j = j + y<br>   <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= tmp_i &lt; row <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= tmp_j &lt; col <span class="hljs-keyword">and</span> grid[tmp_i][tmp_j] == <span class="hljs-string">"1"</span>:<br>   	grid[tmp_i][tmp_j] = <span class="hljs-string">"0"</span><br>    queue.appendleft((tmp_i, tmp_j))<br><br> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(row):<br>   <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> range(col):<br>     <span class="hljs-keyword">if</span> grid[i][j] == <span class="hljs-string">"1"</span>:<br>       bfs(i, j)<br>       cnt += <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>
<h3 id="打开转盘锁">打开转盘锁</h3>
<p>yield 的使用</p>
<h2 id="栈">栈</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">stack=[]<br>stack.append()<br>stack.pop()<br>stack[<span class="hljs-number">-1</span>]<span class="hljs-comment">#取出栈顶元素</span><br></code></pre></td></tr></table></figure>
<h3 id="最小栈">最小栈</h3>
<p>使用两个栈，一个作为<strong>辅助栈</strong>。</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  

  
  
  

</article>
    
    <article id="post-Mathematics/Linear-Algebra" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/28/Mathematics/Linear-Algebra/"
    >Linear Algebra</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/28/Mathematics/Linear-Algebra/" class="article-date">
  <time datetime="2020-02-28T01:44:42.000Z" itemprop="datePublished">2020-02-28</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Mathematics/">Mathematics</a> / <a class="article-category-link" href="/categories/Mathematics/Algebra/">Algebra</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="线性代数学习笔记">线性代数学习笔记</h1>
<p>不加入例题</p>
<p>主要是例题中用到的基本性质和定理的证明</p>
<p>推荐网站：<a href="https://ccjou.wordpress.com/" target="_blank" rel="noopener">线代启示录</a></p>
<h2 id="线性空间">1. 线性空间</h2>
<h3 id="基的可扩充性">基的可扩充性</h3>
<p><span class="math inline">\(V^n\)</span> 的任意一组线性无关的向量都可扩充为一组基。</p>
<p>证明：</p>
<p>​ 对于一个有 <span class="math inline">\(m\)</span> 个向量的线性无关组，若 <span class="math inline">\(m&lt;n\)</span> ，则 <span class="math inline">\(V\)</span> 中肯定<strong>存在向量 <span class="math inline">\(x\)</span> 不能被他们表示</strong>。</p>
<p>​ 可以证明 <span class="math inline">\(x\)</span> 与他们线性无关，把 <span class="math inline">\(x\)</span> 添进去，构成新的线性无关组。</p>
<p>​ 这样一直添，最后可以扩充为一组基。</p>
<h3 id="维数公式">维数公式</h3>
<p><span class="math display">\[
dim\ W_1+dim\ W_2=dim(W_1+W_2)+dim(W_1\cap W_2)
\notag
\]</span></p>
<p>证明：</p>
<p>​ 取 <span class="math inline">\(W_1\cap W_2\)</span> 的一组基，分别扩充为 <span class="math inline">\(W_1\)</span> 和 <span class="math inline">\(W_2\)</span> 的基，</p>
<p>​ 则它们组合起来组成的向量组可以张成 <span class="math inline">\(W_1+W_2\)</span> 。</p>
<p>​ 接下来只需证明它们线性无关。 <span class="math display">\[
\begin{aligned}
W_1\cap W_2&amp;=\mathcal{L}(\alpha_1,\cdots,\alpha_r)\\
W_1&amp;=\mathcal{L}(\alpha_1,\cdots,\alpha_r,\beta_1,\cdots,\beta_s)\\
W_2&amp;=\mathcal{L}(\alpha_1,\cdots,\alpha_r,\gamma_1,\cdots,\gamma_t)\\
\implies W_1+W_2&amp;=\mathcal{L}(\alpha_1,\cdots,\alpha_r,\beta_1,\cdots,\beta_s,\gamma_1,\cdots,\gamma_t)
\end{aligned}
\]</span></p>
<p>​ 按线性无关定义写出式子，把 <span class="math inline">\(\gamma\)</span> 项移到等式右边，</p>
<p>​ 利用 <span class="math inline">\(W_1\cap W_2\)</span> 可以把两边都表示成 <span class="math inline">\(\alpha\)</span> 项的线性组合，</p>
<p>​ 依次利用移项后是 <span class="math inline">\(W_2\)</span> 和 $ W_1 $ 的基，最后得到全是 <span class="math inline">\(0\)</span>。</p>
<h3 id="直和">直和</h3>
<p>设 <span class="math inline">\(U_1,\cdots,U_m\)</span> 都是 <span class="math inline">\(V\)</span> 的子空间，则:</p>
<ul>
<li>（定义）<span class="math inline">\(U_1+\cdots+U_m\)</span> 是直和，如果 <span class="math inline">\(U_1+\cdots+U_m\)</span> 中的每个元素都可以唯一的表示成 <span class="math inline">\(u_1+\cdots+u_m\)</span> ，其中每个 <span class="math inline">\(u_j\in U_j\)</span>。</li>
<li><p><span class="math inline">\(\iff\)</span> <span class="math inline">\(0\)</span> 唯一分解成 <span class="math inline">\(0+\cdots+0\)</span></p></li>
<li><p>对于两个子空间的直和，<span class="math inline">\(U+W=U\oplus W\iff U\cap W=\{0\}\)</span></p></li>
</ul>
<h5 id="常用结论">常用结论：</h5>
<ul>
<li><span class="math inline">\(\dim V&lt;\infty\)</span> ，若 <span class="math inline">\(T\in \mathcal{L}[V]\)</span> 是幂等变换，则 <span class="math inline">\(V=N(T)\oplus R(T)\)</span> .</li>
<li><span class="math inline">\(T\in\mathcal{L}[V],\dim V=n\implies V=R(T^n)\oplus N(T^n)\)</span></li>
</ul>
<h2 id="线性映射">2. 线性映射</h2>
<h3 id="线性映射的维数定理">线性映射的维数定理</h3>
<p><span class="math inline">\(T:V\to W&#39;\)</span>, <span class="math inline">\(dim\ N(T)+dim\ R(T)=dim\ V\)</span></p>
<p>即：<span class="math inline">\(dim\ Ker(T)+dim\ Im(T)=dim\ V\)</span></p>
<p>证明1：</p>
<p>​ 去证 <strong><span class="math inline">\(\overline T:\overline V\to W\)</span>, <span class="math inline">\(\overline v\mapsto T(v)\)</span> 是线性映射且为双射</strong>, <span class="math inline">\(\overline T\)</span> 是由 <span class="math inline">\(T\)</span> 诱导出来的线性映射。</p>
<p>​ 其中 <span class="math inline">\(W=Im(T)\)</span>, <span class="math inline">\(\overline V=V/ker(T)\)</span>。 从而 <span class="math inline">\(V/ker(T)\cong Im(T)\)</span>。</p>
<ol type="1">
<li><p><span class="math inline">\(\overline T\)</span> 的<strong>定义是合理的</strong>：<span class="math inline">\(\overline T(\overline v)=T(v), \forall k\in Ker(T),\overline v=v+k\)</span></p>
<p>这需要证明对 <span class="math inline">\(\overline v=v+k_1\)</span> 和 <span class="math inline">\(\overline {v+k_2}=\overline v=v+k_2\)</span>, <span class="math inline">\(\overline T(\overline {v+k_1})=\overline T(\overline {v+k_2})=T(v)\)</span>.</p>
<p>即 <span class="math inline">\(\overline T(\overline v)=T(v)\)</span> 的成立不依赖于 $v’v=v+Ker(T) $ 的选取</p>
<p>这是由于 <span class="math inline">\(\forall k\in Ker(T),\overline T(\overline {v+k})=T(v+k)=T(v)+T(k)=T(v)\)</span></p></li>
<li><p><span class="math inline">\(\overline T\)</span> <strong>是线性映射</strong>：</p>
<ul>
<li><p>加法：</p>
<p><span class="math inline">\(\overline T(\overline {v_1+v_2})=T(v_1+v_2)=T(v_1)+T(v_2)=\overline T(\overline v_1)+\overline T(\overline v_2)\)</span></p></li>
<li><p>数乘：</p>
<p><span class="math inline">\(\overline T(\lambda \overline {v})=\overline T(\overline {\lambda v})=T(\lambda v)=\lambda T(v)=\lambda\overline T(\overline v)\)</span></p></li>
</ul></li>
<li><p><span class="math inline">\(\overline T\)</span> <strong>是双射</strong>：</p>
<ul>
<li><p>单射：</p>
<p><span class="math inline">\(\overline T(\overline v)=0=&gt;T(v)=0=&gt;v\in Ker(T)=&gt;\overline v=0\\ =&gt;Ker(\overline T)=0\)</span></p></li>
<li><p>满射：</p>
<p><span class="math inline">\(\forall w\in W=Im(T),\exist v\in V,s.t.\quad T(v)=w\\ =&gt;\exist\overline v, \overline T(\overline v)=T(v)=w\)</span></p></li>
</ul></li>
</ol>
<p>证明2:</p>
<p>​ 取 $ N(T)$ 的一组基 <span class="math inline">\((v_1,\cdots,v_s)\)</span> ，将其扩充为 <span class="math inline">\(V\)</span> 的一组基 <span class="math inline">\((v_1,\cdots,v_s,v_{s+1},\cdots,v_n)\)</span></p>
<p>​ 则 <span class="math inline">\(R(T)=\mathcal{L}\big[T(v_1),\cdots,T(v_n)\big]=\mathcal{L}\big[T(v_{s+1}),\cdots,T(v_n)\big]\)</span></p>
<p>​ 因此 <span class="math inline">\(T(v_{s+1}),\cdots,T(v_{n})\)</span> 可张成 <span class="math inline">\(R(T)\)</span> ，只需证明它们线性无关。</p>
<p>​ 如果 <span class="math inline">\(a_1 T(v_{s+1})+\cdots +a_{n-s}T(v_{n})=0\)</span></p>
<p>​ 则 <span class="math inline">\(T(a_1v_{s+1}+\cdots+a_{n-s}v_n)=0\)</span></p>
<p>​ <span class="math inline">\(=&gt; a_1v_{s+1}+\cdots+a_{n-s}v_n\in N(T)\)</span></p>
<p>​ 故 <span class="math inline">\(\exist v_1,\cdots,v_s, \quad a_1v_{s+1}+\cdots+a_{n-s}v_n=b_1v_1+\cdots b_sv_s\)</span></p>
<p>​ 全部移到左边，由于 <span class="math inline">\(v_1,\cdots,v_n\)</span> 是 <span class="math inline">\(V\)</span> 的基，全部系数为 <span class="math inline">\(0\)</span>.</p>
<h3 id="线性映射的一些定理">线性映射的一些定理</h3>
<ul>
<li><p>到更大维数向量空间的线性映射不是满的</p>
<p>一定有东西会表示不出来</p></li>
<li><p>到更小维数向量空间的线性映射不是单的</p></li>
</ul>
<h3 id="线性映射的矩阵表示">线性映射的矩阵表示</h3>
<p>(搞晕了很久 现在终于弄明白了)</p>
<p>（真的是一波三折，感谢hyw，现在应该终于终于弄明白了 2020.5.9)</p>
<h4 id="对基">（1）对基</h4>
<p><span class="math display">\[
T(e_1,\cdots,e_n)=(f_1,\cdots,f_m)M(T)\\
Te_k=M(T)第k列
\notag
\]</span></p>
<p>​ 其中，<span class="math inline">\(e\)</span> 是原空间的基， <span class="math inline">\(f\)</span> 是像空间的基。</p>
<h4 id="对向量">（2）对向量</h4>
<p>​ 设 <span class="math inline">\(X=(x_1,\cdots,x_n)^T\)</span> 为向量 <span class="math inline">\(\xi\)</span> 在基 <span class="math inline">\(e=(e_1,\cdots,e_n)\)</span> 下的坐标。 <span class="math display">\[
\xi=(e_1,\cdots,e_n)X
\notag
\]</span> ​ <span class="math inline">\(T\)</span> 作用后的向量为： <span class="math display">\[
\begin{aligned}
T(\xi)&amp;=T(e_1,\cdots,e_n)X\\
&amp;=(f_1,\cdots,f_m)M(T)X
\end{aligned}
\]</span> ​ <span class="math inline">\(T\)</span> 作用后得到的向量的坐标是 <span class="math inline">\(M(T)X\)</span>.</p>
<p>(美妙的证明)</p>
<h4 id="线性映射在不同基下表示表示矩阵的关系">（3）线性映射在不同基下表示表示矩阵的关系</h4>
<p>相似。 <span class="math display">\[
\begin{aligned}
T[(e_1,\cdots,e_n)]&amp;=T[(f_1,\cdots,f_m)A]\\
&amp;=T[(f_1,\cdots,f_m)]A\\
&amp;=(f_1,\cdots,f_m)M_fA\\
&amp;=(e_1,\cdots,e_n)A^{-1}M_fA
\end{aligned}
\]</span> 所以，<span class="math inline">\(M_e=A^{-1}M_fA\)</span>, <span class="math inline">\(A\)</span> 为基的过渡矩阵，<span class="math inline">\(M_e,M_f\)</span> 为线性映射在不同基下的矩阵表示。</p>
<h4 id="同一个向量在不同基下的坐标关系">（4）同一个向量在不同基下的坐标关系</h4>
<p><span class="math inline">\(T:V\to W\)</span></p>
<p><span class="math inline">\(\xi=(v_1,\cdots,v_n)A=(w_1,\cdots,w_m)B\)</span></p>
<p>其中 <span class="math inline">\(A=(a_1,\cdots,a_n)^T\)</span>, <span class="math inline">\(B=(b_1,\cdots,b_m)^T\)</span> (注意有转置，<strong>基是行向量，坐标是列向量</strong>)</p>
<p>是 <span class="math inline">\(\xi\)</span> 在不同基下的坐标</p>
<p>则 ： <span class="math display">\[
B=M(T)^{-1}A\notag
\]</span></p>
<h4 id="总结">（5）总结</h4>
<p>由此可见，线性映射对应的矩阵：</p>
<ul>
<li><p>对基的变换是右乘作用，对基的 <span class="math inline">\(k\)</span> 分量变换后的结果为矩阵的第 <span class="math inline">\(k\)</span> 列</p></li>
<li><p>对向量的坐标的变换为左乘</p></li>
<li><p>在不同基下的表示矩阵相似</p></li>
<li><p>如何求线性映射的矩阵表示 <span class="math inline">\(A\)</span>： <span class="math display">\[
\begin{align}
&amp;T(e_1, e_2,\dots ,e_n)=(e_1,e_2,\dots,e_n)A\label{T-act}\\
\implies&amp; T (e_1)=a_{11}e_1+a_{21}e_2+\cdots+a_{n1}e_n\\
&amp; T(e_i)=a_{1i}e_1+a_{2i}e_i+\cdots+a_{ni}e_n
\end{align}
\]</span> 先把 <span class="math inline">\((\ref{T-act})\)</span> 写下来，然后计算 <span class="math inline">\(T\)</span> 作用到基的某个向量得到的结果，对应着 <span class="math inline">\(A\)</span> 的某<strong>列</strong>与基的线性组合，一般可以直接对照着写出来。一个 <span class="math inline">\(e_k\)</span> 可以确定 <span class="math inline">\(A\)</span> 的一列（第 <span class="math inline">\(k\)</span> 列）。</p>
<p>小技巧：</p>
<ul>
<li>若基的某个向量是特征向量，则表示矩阵直接对应的那个对角元之间就是特征值，列的其他元为 <span class="math inline">\(0\)</span></li>
</ul></li>
</ul>
<h3 id="线性方程组">线性方程组</h3>
<p>设矩阵 <span class="math inline">\(A\in M_{m\times n}(\mathbf{F})\)</span>, 若 <span class="math inline">\(r(A)=r\)</span>, 则齐次线性方程组 <span class="math inline">\(AX=0\)</span> 的解空间 <span class="math inline">\(N(A)\)</span> 是一个 <span class="math inline">\(n-r\)</span> 维子空间。</p>
<p>证明：</p>
<p>​ <span class="math inline">\(A\)</span> 与一个线性映射 <span class="math inline">\(\sigma\in L(V_1,V_2)\)</span> 对应, <span class="math inline">\(\dim V_1=n, \dim V_2=m\)</span> .</p>
<p>​ <span class="math inline">\(AX=0\)</span> 解空间中的基是 <span class="math inline">\(\sigma\)</span> 核空间的基关于 <span class="math inline">\(V_1\)</span> 的坐标, 解空间的基和 <span class="math inline">\(N(\sigma)\)</span> 的基一一对应 .</p>
<p>简单证明：</p>
<p>​ 把 <span class="math inline">\(A\)</span> 看作线性变换， <span class="math inline">\(rank(A)=Range(A)\)</span> , <span class="math inline">\(A\)</span> 的核 <span class="math inline">\(N(A)\)</span> 就是方程组的解空间。</p>
<p><strong>注</strong>：矩阵的秩：矩阵列向量中极大线性无关组的元素个数，等于矩阵作为线性变换对应矩阵的像空间维数。</p>
<h3 id="幂等变换的性质">幂等变换的性质</h3>
<p>幂等变换: <span class="math inline">\(T:V\to W,\quad T^2=T\)</span></p>
<ul>
<li><p><span class="math inline">\(N(T)=\{v-T(v)\mid v\in V \}\)</span></p></li>
<li><span class="math inline">\(N(T)\cap R(T)=0\)</span></li>
<li><p><span class="math inline">\(V=N(T)\oplus R(T)\)</span></p></li>
</ul>
<p>证明：</p>
<p>​ 对第二条，只需证明核空间与像空间的交是 <span class="math inline">\(0\)</span></p>
<p>​ 如果 <span class="math inline">\(w\in N(T)\cap R(T)\)</span>, 则：</p>
<p>​ 由于 <span class="math inline">\(w\in N(T)\)</span>, <span class="math inline">\(T(w)=0\)</span></p>
<p>​ 由于 <span class="math inline">\(w\in R(T)\)</span>, <span class="math inline">\(\exist v\in V,w=T(v)\)</span>, <strong>两边再作用一下 <span class="math inline">\(T\)</span></strong>, 得到：<span class="math inline">\(0=T(w)=T^2(v)=T(v)=w\)</span></p>
<p>​</p>
<p>​ 对第一条，</p>
<p>​ 这是由于 $vV,T^2(v)=T(v)=&gt;T[T(v)-v]=0=&gt;T(v)-vN(T)=&gt;{v-T(v)}N(T)\ vN(T),v=v-T(v)=&gt;{v-T(v)}N(T) $</p>
<h3 id="算子">算子</h3>
<p>算子：向量空间到自身的线性映射</p>
<p>对有限为空间的算子 <span class="math inline">\(T\)</span>：<span class="math inline">\(T\)</span> 可逆<span class="math inline">\(\iff\)</span> <span class="math inline">\(T\)</span> 单 <span class="math inline">\(\iff T\)</span> 满</p>
<h3 id="对偶">对偶</h3>
<h2 id="内积空间">3. 内积空间</h2>
<p>带有内积的向量空间。</p>
<p>内积：对第一个分量成线性，对第二个分量成共轭线性，有共轭对称性。</p>
<h3 id="线性映射的内积表示">线性映射的内积表示</h3>
<p><span class="math display">\[
\begin{align}
T((v_1,\dots,v_n)&amp;=(v_1,\dots,v_n)A\notag \\
T(v_i)&amp;=\sum_{j=1}^n v_j a_{ji}\notag \\
\therefore \quad a_{ij}&amp;=\langle Tv_j,v_i\rangle
\end{align}
\]</span></p>
<h3 id="柯西-施瓦茨不等式">柯西-施瓦茨不等式</h3>
<p><span class="math display">\[
|\langle u,v \rangle|\leq\|u\|\|v\|
\]</span></p>
<p>证明：</p>
<p>将 <span class="math inline">\(u\)</span> 正交分解: <span class="math display">\[
u=\frac{\langle u,v\rangle}{\|v^2\|}v + w
\]</span> 则 <span class="math display">\[
\begin{aligned}
\|u\|^2&amp;=\bigg\|\frac{\langle u,v\rangle}{\|v^2\|}v\bigg\|^2+\|w\|^2\\
&amp;\geq \bigg\|\frac{\langle u,v\rangle}{\|v^2\|}v\bigg\|^2=\frac{|\langle u,v\rangle|^2}{\|v\|^2}
\end{aligned}
\]</span> 乘过去即得。</p>
<h3 id="schmidt-正交化">Schmidt 正交化</h3>
<p>设 <span class="math inline">\(v_1,\dots,v_m\)</span> 是 <span class="math inline">\(V\)</span> 中的线性无关向量组，设 <span class="math inline">\(e_1=v_1/\|v_1\|\)</span>. <span class="math display">\[
e_j=\frac{v_j-\langle v_j,e_1\rangle e_1-\cdots-\langle v_j,e_{j-1}\rangle e_{j-1}}{\|v_j-\langle v_j,e_1\rangle e_1-\cdots-\langle v_j,e_{j-1}\rangle e_{j-1}\|}
\]</span> <span class="math inline">\(\{e_1,\dots,e_m\}\)</span> 是 <span class="math inline">\(V\)</span> 中的规范正交组。</p>
<p>理解：有一组极大线性无关向量组，先确定一个向量作为A，后一个向量减去在A上的投影（分量）作为B，再后一个减去在前两个A，B上的分量作为C，类似的操作之后得到正交向量组，最后除以各自的模长。</p>
<h3 id="舒尔定理">舒尔定理</h3>
<p>设 <span class="math inline">\(V\)</span> 是有限维的复向量空间且 <span class="math inline">\(T\in \mathcal{L}(V,\mathbf{F})\)</span> ，则 <span class="math inline">\(T\)</span> 关于 <span class="math inline">\(V\)</span> 的某个规范正交基具有上三角矩阵。</p>
<p>证明：</p>
<p>​ 设 <span class="math inline">\(V=span\{v_1,\dots,v_n\}\)</span> , <span class="math inline">\(\{e_1,\dots,e_n\}\)</span> 为其规范正交基。</p>
<p>​ 则 <span class="math inline">\(span\{e_1,\dots,e_n\}=span\{v_1,\dots,v_n\}\)</span></p>
<p>​ 由于存在 <span class="math inline">\(T\)</span> ,其关于 <span class="math inline">\(\{v_1,\dots,v_n\}\)</span> 具有上三角矩阵，则对于每个 <span class="math inline">\(j=1,\dots,n\)</span></p>
<p>​ $ span{v_1,,v_j}$在 <span class="math inline">\(T\)</span> 作用下不变</p>
<p>​ 故 <span class="math inline">\(span\{e_1,\dots,e_j\}=span\{v_1,\dots,v_j\}\)</span> 在 <span class="math inline">\(T\)</span> 作用下不变</p>
<p>​ 所以 <span class="math inline">\(T\)</span> 关于 <span class="math inline">\(\{e_1,\dots,e_n\}\)</span> 具有上三角矩阵。</p>
<h5 id="关于上三角矩阵">关于上三角矩阵</h5>
<p>设 <span class="math inline">\(T\in\mathcal{L}[V]\)</span>，<span class="math inline">\((v_1,\dots,v_n)\)</span> 是 <span class="math inline">\(V\)</span> 的基。</p>
<p>TFAE：</p>
<ul>
<li><span class="math inline">\(T\)</span> 关于 <span class="math inline">\(v_1,\dots,v_n\)</span> 的矩阵是上三角的</li>
<li><span class="math inline">\(Tv_j\in span\{v_1,\dots,v_j\}\)</span></li>
<li><span class="math inline">\(span\{v_1,\dots,v_j\}\)</span> 在 <span class="math inline">\(T\)</span> 作用下不变</li>
</ul>
<h3 id="对偶空间">对偶空间</h3>
<h4 id="符号说明">符号说明</h4>
<ul>
<li><span class="math inline">\(\mathcal{L}(V,W)\)</span> 表示从 <span class="math inline">\(V\)</span> 到 <span class="math inline">\(W\)</span> 的全部线性映射</li>
<li><span class="math inline">\(\mathbf{F}^{m,n}\triangleq \mathbf{F}^m\times\mathbf{F}^n\)</span> 可看作所有 <span class="math inline">\(m\times n\)</span> 矩阵</li>
<li>线性泛函：从 <span class="math inline">\(V\)</span> 到 <span class="math inline">\(\mathbf{F}\)</span> 的线性映射，即为 <span class="math inline">\(\mathcal{L}(V,\mathbf{F})\)</span> 中的元素</li>
<li><p>对偶空间 <span class="math inline">\(V’\)</span>：<span class="math inline">\(V\)</span> 上所有线性泛函构成的向量空间</p></li>
<li>对偶基 <span class="math inline">\(\{\varphi_1,\dots,\varphi_n\}\)</span>： <span class="math inline">\(\varphi_j(e_k)=\delta_{jk}\)</span></li>
<li>对偶映射 <span class="math inline">\(T’\)</span>：<span class="math inline">\(T’(\varphi)=\varphi\circ T ,\quad T’\in\mathcal{L}(V’,W’), \varphi\in W’,T’\in V&#39;\)</span></li>
<li><p>零化子 <span class="math inline">\(U^0\)</span>：<span class="math inline">\(U^0=\{\varphi\in V’:\varphi(u)=0,\forall u\in U\},U\subset V\)</span></p></li>
</ul>
<h4 id="重要结论">重要结论</h4>
<ul>
<li><p><span class="math inline">\(\mathcal{M}(T)\)</span> 为 <span class="math inline">\(T\in\mathcal{L}(V,W)\)</span> 的矩阵表示 , 其实是一个从 <span class="math inline">\(\mathcal{L}(V,W)\to\mathbf{F}^{m,n}\)</span> 的同构。</p></li>
<li>对偶映射的代数性质：<span class="math inline">\((aS+bT)’=aS’+bT’\)</span>, <span class="math inline">\((ST)’=T’S&#39;\)</span></li>
<li><span class="math inline">\(T’\)</span> 的矩阵是 <span class="math inline">\(T\)</span> 的矩阵的转置</li>
<li><span class="math inline">\(\dim V’=\dim V\)</span></li>
<li><span class="math inline">\(\dim U+\dim U^0=\dim V\)</span></li>
<li><span class="math inline">\(T 满\iff T’单, N(T’)=R(T)^0\)</span></li>
<li><p>$ T单T’满,R(T’)=N(T)^0$</p></li>
<li><p><span class="math inline">\(\dim R(T)=\dim R(T&#39;)\)</span></p></li>
</ul>
<h3 id="里斯表示定理">里斯表示定理</h3>
<p>设 <span class="math inline">\(V\)</span> 是有限维的且 <span class="math inline">\(\varphi\)</span> 是 <span class="math inline">\(V\)</span> 上的线性泛函，则存在唯一的向量 <span class="math inline">\(u\in V\)</span> 使得对每个 <span class="math inline">\(v\in V\)</span> 均有 <span class="math inline">\(\varphi(v)=\langle v,u\rangle\)</span>.</p>
<h2 id="多项式">4. 多项式</h2>
<h3 id="带余除法">带余除法</h3>
<p>设 <span class="math inline">\(p,s\in \mathcal{P}(\mathbb{F})\)</span> 且 <span class="math inline">\(s\neq 0\)</span>, 则存在唯一多项式 <span class="math inline">\(q,r\in\mathcal{P}(\mathbb{F})\)</span> 使得 <span class="math display">\[
p=sq+r
\notag
\]</span> 且 <span class="math inline">\(\deg\ r&lt;\deg\ s\)</span> .</p>
<p>证明：</p>
<p>​ 记 <span class="math inline">\(n=\deg p,m =\deg s\)</span></p>
<p>​ <span class="math inline">\(n&gt;m\)</span> 时： <span class="math display">\[
\begin{aligned}
&amp;\because T:\mathcal{P_{n-m}}\times\mathcal{P_{m-1}}\to\mathcal{P_{n}},\quad (q,r)\mapsto sq+r \quad 是线性双射
\\
&amp;\therefore\{(q,r)\mid q\in \mathcal{P_{n-m}},r\in\mathcal{P_{m-1}}\}\cong\{sq+r\mid q\in \mathcal{P_{n-m}},r\in\mathcal{P_{m-1}}\}
\\
&amp;\because \dim \mathcal{P_{n-m}}\times\mathcal{P_{m-1}}=(n-m+1)+(m-1+1)=n+1\\
&amp;\therefore \dim R(T)=n+1=\dim \mathcal{P_n}\\
&amp;\therefore \{sq+r\mid q\in \mathcal{P_{n-m}},r\in\mathcal{P_{m-1}}\}\cong \mathcal{P_n(\mathbb{F})}
\end{aligned}
\]</span></p>
<h3 id="代数基本定理">代数基本定理</h3>
<p>任何一个次数大于 <span class="math inline">\(0\)</span> 的复多项式都至少有一个复数根。</p>
<p>证明：</p>
<p>​ 若 <span class="math inline">\(p\in \mathbf{C}[x]\)</span> 没有根，则 <span class="math inline">\(\displaystyle\frac 1 p\)</span> 为全平面有界的解析函数。由刘维尔定理知其必为常数。</p>
<h3 id="拉格朗日多项式">拉格朗日多项式</h3>
<p><span class="math display">\[
f_i (x)=\prod_{\substack{s=1\\s\neq i}}^n \frac{x-c_s}{c_i-c_s}
\]</span></p>
<p><span class="math inline">\(\{f_0,f_1,\dots,f_n\}\)</span> 构成了 $[x]_{n} $ 的一组代入意义下的单位正交基（ <span class="math inline">\(f_i(c_j)=\delta_{ij}\)</span>）</p>
<p>拉格朗日插值公式： $g(x)=b_i f_i $ 满足： <span class="math inline">\(g(c_i)=b_i\)</span> .</p>
<h2 id="矩阵">5. 矩阵</h2>
<h3 id="秩">秩</h3>
<ul>
<li>定义与意义</li>
</ul>
<p>矩阵的列向量的极大线性无关组的元素个数。</p>
<p><span class="math inline">\(A:m\times n\iff \sigma:\mathbb{R}^n\to\mathbb{R}^m\)</span></p>
<p>由于： <span class="math display">\[
R(A)=\left(
\begin{matrix}
a_{11}x_1+a_{12}x_2+\cdots+a_{1n}x_n\\
a_{21}x_1+a_{22}x_2+\cdots+a_{2n}x_n\\
\vdots\\
a_{m1}x_1+a_{m2}x_2+\cdots+a_{mn}x_n
\end{matrix}
\right)
=\mathscr{L}\left\{ \left(\begin{aligned}a_{11}\\a_{21}\\ \vdots \\ a_{m1}\end{aligned}\right),\left(\begin{aligned}a_{12}\\a_{22}\\ \vdots \\ a_{m2}\end{aligned}\right),\cdots,\left(\begin{aligned}a_{1n}\\a_{2n}\\ \vdots \\ a_{mn}\end{aligned}\right)\right\}
\]</span> <span class="math inline">\(A\)</span> 的列秩等于 <span class="math inline">\(A\)</span> 的列空间维数，也是对应线性映射的像空间维数 <span class="math inline">\(\dim R(A)\)</span>。</p>
<ul>
<li>行秩 <span class="math inline">\(=\)</span> 列秩</li>
</ul>
<h3 id="行列式">行列式</h3>
<ul>
<li><span class="math inline">\(\det (A)=\det(A^T)\)</span> 证：初等矩阵转置行列式不变，将矩阵 <span class="math inline">\(A\)</span> 进行初等矩阵分解</li>
</ul>
<h2 id="特征值理论">6. 特征值理论</h2>
<h3 id="特征向量线性无关">特征向量线性无关</h3>
<p>相应于不同特征值的特征向量线性无关。</p>
<p>证明：</p>
<p>​ 设 <span class="math inline">\(T\in \mathcal{L}(V)\)</span> ，设 <span class="math inline">\(\lambda_1,\dots,\lambda_m\)</span> 是 <span class="math inline">\(T\)</span> 对互不相同的特征值， <span class="math inline">\(v_1,\dots,v_m\)</span> 是相应的特征向量，则 <span class="math inline">\(v_1,\dots,v_m\)</span> 是线性无关的。</p>
<p>​ 设 <span class="math inline">\(k\)</span> 是使得 <span class="math inline">\(v_k=span\{v_1,\dots,v_{k-1}\}\)</span> 成立的<strong>最小</strong>正整数。 <span class="math display">\[
\begin{aligned}
v_k&amp;=a_1v_1+\cdots+a_{k-1}v_{k-1}\\
T(v_k)=\lambda_k v_k&amp;=a_1\lambda_1v_1+\cdots+a_{k-1}\lambda_{k-1}v_{k-1}\\
\lambda_k v_k&amp;=a_1\lambda_k v_1+\cdots+a_{k-1}\lambda_{k}v_{k-1}
\\
\\
\implies &amp;a_1(\lambda_1-\lambda_k)v_1+\cdots+a_{k-1}(\lambda_{k-1}-\lambda_{k})v_{k-1}=0\\
\implies &amp;a_1=\cdots=a_{k-1}=0
\end{aligned}
\]</span> ​ 矛盾，故不存在这样的 <span class="math inline">\(k\)</span> ， 特征向量线性无关。</p>
<h3 id="特征子空间">特征子空间</h3>
<p>特征子空间是不变子空间。</p>
<p>特征子空间的和是直和。</p>
<p><span class="math inline">\(i.e.\)</span> <span class="math display">\[
W=E_{\lambda_1}+\cdots + E_{\lambda_m}=E_{\lambda_1}\oplus \cdots \oplus E_{\lambda_m}
\notag
\]</span> 证明：</p>
<p>设<span class="math inline">\(\lambda_j\)</span> 和 <span class="math inline">\(E_{\lambda_j}\)</span> 是 <span class="math inline">\(n\)</span> 维线性空间 <span class="math inline">\(V\)</span> 的线性变换 <span class="math inline">\(T\)</span> 的 <span class="math inline">\(m\)</span> 个互不相同的特征值及相应的特征子空间，则只需证明<strong>零向量</strong>在 <span class="math inline">\(W\)</span> 中的<strong>分解唯一</strong>。</p>
<p>即证： <span class="math inline">\(\xi_1+\cdots \xi_m=0\implies \xi_i=0,\quad \xi_i\in E_{\lambda_i}\)</span></p>
<p>注意 <span class="math inline">\(\xi_i\)</span> 是特征子空间 <span class="math inline">\(E_{\lambda_i}\)</span> 中的向量，由属于 <span class="math inline">\(\lambda_i\)</span> 的特征向量线性组合而成，仍有 <span class="math inline">\(T(\xi_i)=\lambda_i\xi_i\)</span></p>
<p><strong>归纳</strong>证明： $$ \begin{aligned} m=2: _1+_2=0 &amp;T(_1+_2)=_1_1+_2_2=0\ &amp;(_1-_2)_2=0\ &amp;_1=_2=0\</p>
<p>\end{aligned} <span class="math display">\[
设对 $m-1$ 结论成立，考虑 $m$ :
\]</span> \begin{aligned} &amp; _1++_m=0\ &amp;T(_1++_m)=_1_1++_m_m=0\ &amp;(_1-_m)<em>1++(</em>{m-1}-<em>m)</em>{m-1}=0\ &amp; <em>1==</em>{m-1}=0_m=0 \end{aligned} $$</p>
<p>由此也可以得到属于不同特征值的特征向量线性无关，因为 <span class="math inline">\(E_{\lambda_i}\cap E_{\lambda_j}={\vec 0}\)</span></p>
<h3 id="可对角化的条件">可对角化的条件</h3>
<p><span class="math inline">\(n\)</span> 维线性空间 <span class="math inline">\(V\)</span> 上的线性变换 <span class="math inline">\(T\)</span> 的表示矩阵 <span class="math inline">\(M(T)\)</span> 可对角化：</p>
<p>$ $ <span class="math inline">\(T\)</span> 有 <span class="math inline">\(n\)</span> 个(线性无关的)特征向量 or <span class="math inline">\(V\)</span> 有由 <span class="math inline">\(T\)</span> 的特征向量构成的基</p>
<p><span class="math inline">\(\iff\)</span> $V=E_{<em>1}E</em>{_m} $ (已经知道和是直和，接下来只需证明和就是 <span class="math inline">\(V\)</span> ,由有由特征向量构成的基即得)</p>
<p><span class="math inline">\(\iff\)</span> <span class="math inline">\(T\)</span> 的每个特征值的重数等于其特征子空间的维数 ( 代数重数 <span class="math inline">\(=\)</span> 几何重数 ）, 且不同特征值的重数之和等 于 <span class="math inline">\(n\)</span></p>
<p>注：一般情况下，代数重数大于等于几何重数，证明先放一放。</p>
<h3 id="矩阵的秩维数与特征值">矩阵的秩、维数与特征值</h3>
<p>特征值个数等于矩阵的维数。其中，不等于 <span class="math inline">\(0\)</span> 且<strong>不同</strong>的特征值个数为矩阵的秩。</p>
<p>也就是说，矩阵的秩是特征子空间的种类数，如何理解和证明？</p>
<h3 id="广义特征向量">广义特征向量</h3>
<p>广义特征向量 <span class="math inline">\(v\)</span> : 如果存在正整数 <span class="math inline">\(j\)</span> 使得 <span class="math inline">\((T-\lambda I)^j v=0\)</span> .</p>
<p>广义特征空间 <span class="math inline">\(G(\lambda,T)\)</span> ：<span class="math inline">\(T\)</span> 的相应于 <span class="math inline">\(\lambda\)</span> 的所有广义特征向量的集合。</p>
<p><strong>大概需要了解的有以下几点：</strong></p>
<ul>
<li><p>代数重数 <span class="math inline">\(d =\)</span> 广义特征空间的维数 <span class="math inline">\(\dim G_\lambda\)</span></p></li>
<li><p><span class="math inline">\(G_\lambda=N\left((T-\lambda I)^d)\right)\)</span></p>
<p>证明（感谢张鸿博！！）：</p>
<ul>
<li><p>根据互相包含可以很容易地证明 <span class="math inline">\(G_\lambda=N\left((T-\lambda I)^{\dim V}\right)\)</span></p></li>
<li>零空间有一个包含链，<span class="math inline">\((T-\lambda I)\)</span> 的次数每增加一次，它的零空间就增加一维。最多到 <span class="math inline">\(\dim G_\lambda=d\)</span> 就停止增长了。</li>
<li><p>于是 <span class="math inline">\(N\left((T-\lambda I)^{\dim V}\right)=N\left((T-\lambda I)^{d}\right)\)</span></p></li>
</ul></li>
</ul>
<hr />
<p>存疑：</p>
<p>已知 <span class="math display">\[
G_\lambda=N\left((T-\lambda I)^{k}\right)
\]</span> <span class="math inline">\(N\)</span> 表示核空间, <span class="math inline">\(k\)</span> 为 <span class="math inline">\(G_\lambda\)</span> 的代数重数，<span class="math inline">\(G_\lambda\)</span> 为广义特征空间。</p>
<p>现在想办法找到 <span class="math inline">\(x\)</span> 使得 <span class="math inline">\(x\leq k\)</span> 且 <span class="math inline">\(N\left((T-\lambda I)^x\right)=N\left((T-\lambda I)^k\right)\)</span>： <span class="math display">\[
x=\dim k-\dim E_\lambda+1
\]</span></p>
<ol type="1">
<li>如何证明？</li>
<li>如果上面的式子是对的，<span class="math inline">\(x\)</span> 可以更小吗？</li>
</ol>
<hr />
<h4 id="零空间的停止增长">零空间的停止增长</h4>
<h4 id="广义特征向量线性无关性">广义特征向量线性无关性</h4>
<h4 id="广义特征空间">广义特征空间</h4>
<h3 id="特征多项式">特征多项式</h3>
<h3 id="极小多项式">极小多项式</h3>
<ul>
<li><span class="math inline">\(T\)</span> 是可逆的当且仅当 <span class="math inline">\(T\)</span> 的极小多项式常数项非零</li>
</ul>
<h4 id="凯莱哈密顿定理">凯莱—哈密顿定理</h4>
<h3 id="jordan-标准型">Jordan 标准型</h3>
<h2 id="算子理论">7. 算子理论</h2>
<h3 id="不变子空间">不变子空间</h3>
<p>待整理</p>
<h3 id="正交投影">正交投影</h3>
<p>待整理</p>
<h3 id="自伴算子">自伴算子</h3>
<p><span class="math inline">\(T=T^*\)</span>.</p>
<p>类比：<span class="math inline">\(z\)</span> 是实数</p>
<h4 id="性质">性质</h4>
<ul>
<li><p><span class="math inline">\(\langle Tv,w\rangle=\langle v,Tw\rangle\)</span></p></li>
<li><p>特征值都是实数</p>
<p>证：<span class="math inline">\(\lambda\|v\|^2=\langle \lambda v,v\rangle=\langle Tv,v\rangle=\langle v,Tv\rangle=\langle v,\lambda v\rangle=\overline\lambda \|v\|^2\)</span></p></li>
<li><p>在 <span class="math inline">\(\mathbf{C}\)</span>, 只有零算子才能使 <span class="math inline">\(Tv\)</span> 总正交于 <span class="math inline">\(v\)</span> : <span class="math inline">\(\forall v\in V ,\langle Tv,v\rangle=0\implies T\equiv 0\)</span></p>
<p>证： <span class="math display">\[
\begin{aligned}
\forall u,w\in V\\
\langle Tu,w \rangle=&amp;\frac{\left\langle T(u+w),u+w\right\rangle-\left\langle T(u-w),u-w\right\rangle}{4}\\
&amp;+\frac{\left\langle T(u+iw),u+iw\right\rangle-\left\langle T(u-iw),u-iw\right\rangle}{4}
\end{aligned}
\]</span></p></li>
<li><p>在 <span class="math inline">\(\mathbf{C}\)</span>, $vV,Tv,v $ (充要)</p>
<p>证： <span class="math inline">\(\langle Tv,v\rangle-\overline{\langle Tv,v\rangle}=0\)</span></p></li>
<li><p>相应于不同特征值的特征向量正交</p></li>
</ul>
<h3 id="正规算子">正规算子</h3>
<p>和伴随可交换：<span class="math inline">\(TT^*=T^*T\)</span></p>
<p>类比：复数 <span class="math inline">\(z\)</span> : 显然 <span class="math inline">\(zz^*=z^*z\)</span></p>
<h4 id="性质-1">性质</h4>
<ul>
<li><p><span class="math inline">\(\|Tv\|=\|T^* v\|\)</span> (充要)</p>
<p>证： <span class="math inline">\(TT^*-T^*T=0\iff \forall v\in V, \langle (TT^*-T^*T)v,v\rangle=0\iff \|T^*v\|^2=\|Tv\|^2\)</span></p></li>
<li><p><span class="math inline">\(T\)</span> 和 <span class="math inline">\(T^*\)</span> 有相同的特征向量 （是充分的吗？）</p>
<p>具体：<span class="math inline">\(v\)</span> 是 <span class="math inline">\(T\)</span> 的相应于特征值 <span class="math inline">\(\lambda\)</span> 的特征向量，则 <span class="math inline">\(v\)</span> 也是 <span class="math inline">\(T^*\)</span> 的相应于 <span class="math inline">\(\overline\lambda\)</span> 的特征向量</p>
<p>证：<span class="math inline">\(0=\|(T-\lambda I)v\|=\|(T-\lambda I)^*v\|=\|(T^*-\overline\lambda I)v\|\)</span></p></li>
<li><p>相应于不同特征值的特征向量正交</p>
<p>证：<span class="math inline">\((\lambda-\mu)\langle v,w\rangle=\langle \lambda v,w\rangle-\langle v,\overline\mu w\rangle=\langle Tv,w\rangle-\langle v,T^*w\rangle=0\)</span></p>
<p>注：<span class="math inline">\(\lambda\)</span> 是 <span class="math inline">\(T\)</span> 的特征值当且仅当 <span class="math inline">\(\overline\lambda\)</span> 是 <span class="math inline">\(T^*\)</span> 的特征值。 （ <span class="math inline">\(\det (T-\lambda I)=0\iff \det (T^*-\overline \lambda I)=0\)</span> ）</p></li>
</ul>
<h3 id="幂零算子">幂零算子</h3>
<ul>
<li>特征值为 <span class="math inline">\(0\)</span></li>
</ul>
<h3 id="谱分解">谱分解</h3>
<h4 id="复谱定理">复谱定理</h4>
<h4 id="实谱定理">实谱定理</h4>
<h4 id="谱分解定理">谱分解定理</h4>
<h3 id="奇异值分解">奇异值分解</h3>
<h4 id="正算子">正算子</h4>
<h5 id="刻画">刻画</h5>
<h4 id="等距同构">等距同构</h4>
<h5 id="刻画-1">刻画</h5>
<h4 id="极分解">极分解</h4>
<h4 id="奇异值分解-1">奇异值分解</h4>
<h5 id="奇异值">奇异值</h5>
<h5 id="线性变换奇异值定理">线性变换奇异值定理</h5>
<h5 id="矩阵的奇异值分解">矩阵的奇异值分解</h5>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  

  
  
  

</article>
    
    <article id="post-Computer-Sciences/Machine Learning/Deep learning/论文笔记-SOS-Net" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/23/Computer-Sciences/Machine%20Learning/Deep%20learning/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0-SOS-Net/"
    >SOS-Net</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/23/Computer-Sciences/Machine%20Learning/Deep%20learning/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0-SOS-Net/" class="article-date">
  <time datetime="2020-02-23T08:42:04.000Z" itemprop="datePublished">2020-02-23</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Computer-Science/">Computer Science</a> / <a class="article-category-link" href="/categories/Computer-Science/Deep-Learning/">Deep Learning</a> / <a class="article-category-link" href="/categories/Computer-Science/Deep-Learning/Paper-Notes/">Paper Notes</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <p>代码链接：https://github.com/scape-research/SOSNet</p>
<p>研读次数：1</p>
<p>对 L2-Net 和超越L2的 Hard-Net 的超越。</p>
<h2 id="待学的东西">待学的东西</h2>
<ul>
<li>Von Mises-Fisher distribution</li>
<li>BOLD</li>
<li>Hard-Net</li>
<li>First Order Similarity (FOS)</li>
<li><span class="math inline">\(K\)</span> Nearest Neighbors (KNN)</li>
</ul>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/notes/" rel="tag">notes</a></li></ul>


    </footer>

  </div>

  

  

  
  
  

</article>
    
    <article id="post-Computer-Sciences/Machine Learning/Deep learning/论文笔记-L2-Net" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/23/Computer-Sciences/Machine%20Learning/Deep%20learning/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0-L2-Net/"
    >L2-Net</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/23/Computer-Sciences/Machine%20Learning/Deep%20learning/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0-L2-Net/" class="article-date">
  <time datetime="2020-02-23T08:42:04.000Z" itemprop="datePublished">2020-02-23</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Computer-Science/">Computer Science</a> / <a class="article-category-link" href="/categories/Computer-Science/Deep-Learning/">Deep Learning</a> / <a class="article-category-link" href="/categories/Computer-Science/Deep-Learning/Paper-Notes/">Paper Notes</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <p>论文链接：http://www.nlpr.ia.ac.cn/fanbin/pub/L2-Net_CVPR17.pdf</p>
<p>代码链接：https://github.com/yuruntian/L2-Net</p>
<p>研读次数：1</p>
<h2 id="提出的好方法">提出的好方法</h2>
<ul>
<li><p>a progressive sampling strategy 渐进采样策略，可使网络在有限次数内获得大量样本</p></li>
<li><p>Discriminative Intermediate Feature map (DIF) 在中间的特征层施加了额外的监督</p></li>
<li><p>Loss function that takes three important error aspects into account:</p>
<ul>
<li>descriptor similarity 未完全理解</li>
<li>descriptor compactness : ‘An interesting finding is that the degree of overfitting is directly related to the degree of correlation among descriptor dimensions’</li>
<li>intermediate feature maps 未完全理解</li>
</ul></li>
</ul>
<h3 id="须了解的相关知识">须了解的相关知识</h3>
<ul>
<li>SIFT descriptor</li>
<li>NNS (nearest neighbor search)</li>
<li>MatchNet (a typical Siamese network)</li>
</ul>
<h3 id="应用">应用</h3>
<ul>
<li>实现 <em>特征匹配</em> 的神经网络的训练</li>
</ul>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/notes/" rel="tag">notes</a></li></ul>


    </footer>

  </div>

  

  

  
  
  

</article>
    
    <article id="post-Physics/数理方法" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/19/Physics/%E6%95%B0%E7%90%86%E6%96%B9%E6%B3%95/"
    >数理方法</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/19/Physics/%E6%95%B0%E7%90%86%E6%96%B9%E6%B3%95/" class="article-date">
  <time datetime="2020-02-19T07:25:17.000Z" itemprop="datePublished">2020-02-19</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Physics/">Physics</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="数理方法整理">数理方法整理</h1>
<center>
作者：黄隆钤 混合1801
</center>
<h2 id="一-数学物理定解问题">一 数学物理定解问题</h2>
<h3 id="定解问题的导出">1.1 定解问题的导出</h3>
<h4 id="振动方程">（1）振动方程</h4>
<p><span class="math display">\[
u_{tt}-a^2u_{xx}=f\left(x,t\right)
\\
u_{tt}-a^2\Delta u =f\left(\mathbf{x},t\right) \qquad \left(high\ dim\right)
\]</span></p>
<ul>
<li><p>弦的横振动</p>
<p><img src="https://tva1.sinaimg.cn/large/0082zybply1gc1rytn6i6j313l0lcabz.jpg" style="zoom:50%;" /></p></li>
</ul>
<p>$ \ $
      
      <a class="article-more-link" href="/2020/02/19/Physics/%E6%95%B0%E7%90%86%E6%96%B9%E6%B3%95/">阅读更多...</a>
      
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  

  
  
  

</article>
    
    <article id="post-Physics/Theoretical-Mechanics" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/18/Physics/Theoretical-Mechanics/"
    >Theoretical Mechanics</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/18/Physics/Theoretical-Mechanics/" class="article-date">
  <time datetime="2020-02-18T06:11:16.000Z" itemprop="datePublished">2020-02-18</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Physics/">Physics</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="理论力学笔记">理论力学笔记</h1>
<p>朗道的《力学》是我心目中第一本几乎完美的书。简洁、让我信服。</p>
<h2 id="总结">总结</h2>
<ul>
<li><p>最小作用量原理</p>
<ul>
<li>$S=S(,q,t)$ Lagrangian, Euler - Lagrange Equation</li>
<li><span class="math inline">\(S=S(\vec p,\vec q,t)\implies\)</span> Hamiltonian, Hamilton Equation</li>
<li><span class="math inline">\(S=S(\vec q,t)\)</span> （看作时间和终点坐标的函数）<span class="math inline">\(\implies\)</span> Hamilton - Jacobi Equation</li>
</ul></li>
<li><p>诺特定理 Noether’s Theorem</p>
<ul>
<li>对称性蕴含着守恒量</li>
<li>对称性意味着在拉格朗日量中 <span class="math inline">\(\vec q \to \vec q + K\varepsilon\)</span> , 奇数阶展开不变</li>
</ul></li>
<li>刘维尔定理
<ul>
<li>正则变换</li>
<li>相空间
<ul>
<li>相积分和角变量</li>
</ul></li>
</ul></li>
<li><p>数学技巧</p>
<ul>
<li>变量替换：勒让德变换等</li>
<li>求解简正频率用到的谱分解方法和线性方程组方法</li>
<li>利用复变量 <span class="math inline">\(i\)</span> 求解耦合方程</li>
</ul></li>
<li><p>应用</p>
<ul>
<li><p>有心力场</p>
<ul>
<li>Binet : 通过轨道反推力</li>
<li>Runge Lenz ：第三个守恒量</li>
<li>利用 H - J 方程可以非常方便地求解</li>
</ul></li>
<li><p>微振动</p></li>
<li><p>刚体力学</p>
<ul>
<li><p>欧拉角</p></li>
<li><p>转动惯量张量</p></li>
<li><p>转动动能</p></li>
<li><p>欧拉方程</p></li>
</ul></li>
<li><p>电动力学</p></li>
<li><p>量子力学</p></li>
</ul></li>
<li><p>作用量</p>
<ul>
<li><p>最小作用量原理</p></li>
<li><p>是正则变换的母函数</p></li>
</ul></li>
<li>拉格朗日量
<ul>
<li>正常：<span class="math inline">\(T\)</span> （粒子自由运动），<span class="math inline">\(T-V\)</span> （存在粒子间相互作用、场对粒子的作用）</li>
<li>有外力：加入 <span class="math inline">\(V_1=-\vec F\cdot \vec l(\vec q)\)</span></li>
<li>有约束：加入拉格朗日乘数 <span class="math inline">\(\lambda\)</span></li>
<li>计算约束反力</li>
</ul></li>
<li><p>哈密顿量</p>
<ul>
<li>$H(p,q)=p-L $</li>
<li><span class="math inline">\(\vec p=\displaystyle \frac {\partial L}{\partial \dot {\vec q}}\implies \dot{\vec q}=f(\vec p)\)</span> 带入把 <span class="math inline">\(\dot{\vec q}\)</span> 换成 <span class="math inline">\(\vec p\)</span></li>
<li>哈密顿方程的第一个给出了广义动量，第二个给出了拉格朗日方程</li>
</ul></li>
<li><p>哈密顿 - 雅可比方程</p>
<ul>
<li><p>$S=S(q,t),=-H , =p $</p></li>
<li><p>保守系：<span class="math inline">\(H=E, S=-Et+S_0(E,t)\implies t=\displaystyle \frac{\partial S_0}{\partial E}\)</span></p></li>
</ul></li>
</ul>
<h2 id="运动方程">运动方程</h2>
<p>最基本的框架。</p>
<p>从最小作用量原理出发 <span class="math display">\[
\delta S=0
\]</span> 推出作用量满足拉格朗日方程 <span class="math display">\[
\frac{d}{dt}\frac{\partial L}{\partial \dot q}-\frac{\partial L}{\partial q}=0
\]</span> 接下来只需要通过分析确定拉格朗日函数 <span class="math inline">\(L(\dot {\vec q},\vec q,t)\)</span></p>
<p>确定 <span class="math inline">\(L\)</span> 的基础是：</p>
<ul>
<li><span class="math inline">\(L\)</span> 是 <span class="math inline">\(\dot q,q,t\)</span> 的函数</li>
<li>时空的均匀性质</li>
<li><span class="math inline">\(L\)</span> 可以增加全导数而不改变运动方程</li>
</ul>
<p>接下来找到了一个规律简单的惯性参考系：相对这个参考系空间均匀各向同性，时间均匀。</p>
<p>对大自然分类讨论，由时空的均匀性确定拉格朗日量 <span class="math inline">\(L\)</span> 的形式。</p>
<p><span class="math inline">\(L\)</span> 可以有一个时间的全导数的变化，而不改变运动方程。</p>
<p>在惯性参考系中，单质点自由运动：<span class="math inline">\(L\)</span> 只是速度大小的函数，不能有 <span class="math inline">\(q\)</span>， 因为空间均匀。</p>
<p>（一般情况下我们都是相对地面这个惯性参考系考虑系统的运动，而不是在系统的固有系中。）</p>
<h3 id="相对惯性参考系">相对惯性参考系</h3>
<h4 id="单质点自由运动">单质点自由运动</h4>
<p><span class="math inline">\(L\)</span> 只是速度大小的函数 <span class="math display">\[
\implies L=\displaystyle\frac 1 2 mv^2
\]</span> 其中 <span class="math inline">\(m\)</span> 为比例系数.</p>
<h4 id="封闭质点系自由运动">封闭质点系自由运动</h4>
<p>多了质点之间的相互作用，空间不再均匀， <span class="math inline">\(L\)</span> 增加了势能项 <span class="math inline">\(U(\vec q)\)</span> : <span class="math display">\[
L=T-U=\sum_a \frac 1 2 mv_a^2-U(\vec r_1,\vec r_2,\cdots )
\]</span></p>
<h4 id="非封闭质点系自由运动">非封闭质点系自由运动</h4>
<p>均匀外场中势能可以写成：<span class="math inline">\(U=-\vec F\cdot \vec r\)</span></p>
<p>扩大质点系范围，将外力视为场纳入更大的质点系使在这个质点系封闭，势能项是这些质点系的坐标的函数。</p>
<h4 id="有约束情形-待完善">有约束情形 （待完善）</h4>
<p>等价于条件极值。拉格朗日量中加入拉格朗日乘子，重新用最小作用量原理推导, 得到： <span class="math display">\[
\frac d {dt}\frac{\partial L}{\partial \dot q_i}-\frac{\partial L}{\partial q}=\sum_a \lambda_a c_{ai}
\]</span></p>
<h3 id="相对非惯性参考系">相对非惯性参考系</h3>
<h4 id="平动">平动</h4>
<p>研究以平动速度 <span class="math inline">\(\vec V(t)\)</span> 相对 惯性参考系 <span class="math inline">\(K_0\)</span> 的参考系 <span class="math inline">\(K_0’\)</span>.</p>
<p><span class="math inline">\(\vec v_0=\vec v’+\vec V(t)\)</span> 带入 <span class="math inline">\(K_0\)</span> 中的拉格朗日函数，并去掉可以看作时间全导数的时间函数项，得到： <span class="math display">\[
L&#39;=\frac 1 2 mv&#39;^2--U-m\vec W(t)\cdot \vec r&#39;
\]</span> 其中 <span class="math inline">\(\vec W=\displaystyle \frac {d\vec V}{dt}\)</span> 为平动加速度。</p>
<h4 id="平动转动">平动+转动</h4>
<p>再引进另外一个参考系 <span class="math inline">\(K\)</span>, 以角速度 <span class="math inline">\(\vec \omega(t)\)</span> 相对 <span class="math inline">\(K’\)</span> 转动。</p>
<p><span class="math inline">\(\vec v’=\vec v+\vec\omega \times \vec r\)</span> 带入 <span class="math inline">\(L’\)</span> 可得任意参考系中质点的拉格朗日函数： <span class="math display">\[
L=\frac 1 2 mv^2+m\vec v\cdot(\vec \omega \times \vec r)+\frac 1 2 m(\vec\omega \times \vec r)^2-m\vec W\cdot \vec r -U
\]</span> 利用此求出全微分 <span class="math inline">\(dL\)</span>，进而可得到相应的广义坐标、广义动量，而这些广义坐标、广义动量给出了<strong>科里奥利力</strong>、<strong>离心力</strong>。</p>
<p>进而可求能量，这给出了<strong>离心势能</strong>。</p>
<p>这些可以用来研究地球自转引起的一些偏移，比如<strong>傅科摆</strong>等。</p>
<h3 id="考虑相对论性">考虑相对论性</h3>
<p>仍是从最小作用量原理出发，利用间隔的洛伦兹不变性给出拉格朗日量，进而推出电动力学理论。（未完，需结合电动力学整合）</p>
<h2 id="守恒定律与运动方程的积分">守恒定律与运动方程的积分</h2>
<h4 id="能量动量角动量">能量、动量、角动量</h4>
<p>利用守恒量进行的对运动的细致分析。</p>
<p>时间均匀性（拉格朗日函数不显含时间）可推出能量守恒。</p>
<p>空间均匀性（平移不变）可推出动量守恒。</p>
<p>空间各向同性（旋转不变）可推出角动量守恒。</p>
<p>由拉格朗日函数一并定义了系统的能量、动量、角动量： <span class="math display">\[
\begin{align}
E&amp;=\vec p\cdot \vec q-L\\
\vec P&amp;= \sum_a \frac{\partial L}{\partial \dot {\vec q_a}}\\
\vec J_k&amp;=\sum_a\frac{\partial L}{\partial \dot {\vec \varphi_a}} &amp;\vec \varphi\text { 是绕 k 轴的转角}
\end{align}
\]</span></p>
<p>对于齐次势能函数，轨道有力学相似性：时间、速度、能量、角动量在不同轨道的比都等于轨道长度之比的某一幂次（两个习题暂时没解决）</p>
<h4 id="守恒量给出的运动方程">守恒量给出的运动方程</h4>
<p>根据系统能量的守恒、动量的守恒或者角动量的守恒，可以确定运动周期。</p>
<p>通过振动周期也可以确定场的势能差的形式。</p>
<p>运动边界由势能等于总能量给出。</p>
<p>一个自由度的有界运动是 <strong>振动</strong>。</p>
<p>二个自由度的二体问题可以通过引入质心系等价到质量为约化质量的单质点在 <strong>有心力场</strong> 中的运动。</p>
<p>对于有心力场中的运动，能量守恒和角动量守恒决定了轨道方程。</p>
<p>只有两种类型的有心力场，其中的一切有界运动的轨道上封闭的，这两种场的势能与 $1 r $ 或 <span class="math inline">\(r^2\)</span> 成正比</p>
<p>更高的自由度便是刚体运动问题。由此引出了转动惯量张量、对称非对称陀螺、欧拉角和 <strong>欧拉方程</strong>。</p>
<p>刚体接触的问题可以利用受约束的拉格朗日方程进行求解，也可以用角动量、角加速度、力矩等列出全部方程进行求解。</p>
<hr />
<p>整体的框架在“总结”部分已经搭好。但是细节方面近期应该是没有办法完完整整写一遍了，附上一些学习过程中受益匪浅的很棒的资料叭。</p>
<p><a href="https://mega.nz/folder/cMxEzIyQ#-Exu_Cxfpu0b4MTThmw-vA" target="_blank" rel="noopener">Good Notes for Theoretical Mechanics</a></p>
<ul>
<li><p>学习拉格朗日方程和哈密顿方程时可以参考 Harvard 的两篇</p></li>
<li><p>学习 H-J 方程时可以参考 Berkeley的那篇</p></li>
</ul>
<p>讲得都非常好 可以加深理解</p>
<p>另外，非常建议学习一遍分析力学之后自己过一遍朗道的&lt;<力学>&gt; ，写得太赞了，简洁而深刻。可以配合鞠国兴老师的&lt;<解读>&gt;食用。</p>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  

  
  
  

</article>
    
    <article id="post-Physics/Electromagnetism" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/18/Physics/Electromagnetism/"
    >Electromagnetism</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/18/Physics/Electromagnetism/" class="article-date">
  <time datetime="2020-02-18T05:32:41.000Z" itemprop="datePublished">2020-02-18</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Physics/">Physics</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="电动力学笔记">电动力学笔记</h1>
<h2 id="麦克斯韦方程和规范理论概述起源杨振宁">0 麦克斯韦方程和规范理论概述起源（杨振宁）</h2>
<ul>
<li><p>Electrotonic state, Faraday<br />
<span class="math display">\[
H=\nabla \times A
\]</span></p></li>
<li><p>Maxwell <span class="math display">\[
Light=EM\ waves
\]</span></p></li>
<li><p>Maxwell : A Dynamical Theory of the Electromagnetic Field <span class="math display">\[
energy\;\ density=\frac{1}{8\pi ^2}(E^2+H^2)
\]</span></p></li>
<li><p>Dirac‘s sea</p></li>
<li><p>Renormalization <span class="math display">\[
\alpha=(g-2)/2
\]</span></p></li>
<li>gauge theory 规范理论, non-Abelian gauge theory, 重整化群</li>
<li><p>Symmetry breaking, Standard Mode</p></li>
</ul>
<p><strong>“妙的地方”</strong></p>
<p>$ \ $
      
      <a class="article-more-link" href="/2020/02/18/Physics/Electromagnetism/">阅读更多...</a>
      
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  

  
  
  

</article>
    
    <article id="post-Other Things/2020" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/11/Other%20Things/2020/"
    >2020</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/11/Other%20Things/2020/" class="article-date">
  <time datetime="2020-02-11T10:30:49.000Z" itemprop="datePublished">2020-02-11</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Life/">Life</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h2 id="section">2020</h2>
<ul>
<li><p>大二冬学期期末 1.1～1.17</p></li>
<li><p>搞博客，研究hexo 1.17～1.20</p></li>
<li><p><a href="%5Bhttps://github.com/Pratitya/wuhan2020-timeline/blob/master/%E6%97%B6%E9%97%B4%E7%BA%BFTIMELINE.md%5D(https://github.com/Pratitya/wuhan2020-timeline/blob/master/时间线TIMELINE.md)">新冠病毒</a></p>
<p>$ \ $
      
      <a class="article-more-link" href="/2020/02/11/Other%20Things/2020/">阅读更多...</a>
      
      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  

  
  
  

</article>
    
    <article id="post-Other Things/Movies" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/02/07/Other%20Things/Movies/"
    >Movies</a> 
</h2>
 

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/02/07/Other%20Things/Movies/" class="article-date">
  <time datetime="2020-02-07T11:00:58.000Z" itemprop="datePublished">2020-02-07</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/life/">life</a> / <a class="article-category-link" href="/categories/life/movie/">movie</a>
  </div>

      
      
      
    </div>
    

    

    
    <div class="article-entry" itemprop="articleBody">
      
      

      
      <h1 id="电影们">电影们</h1>
<ul>
<li>小丑</li>
<li>爱尔兰杀手</li>
</ul>

      
      <!-- reward -->
      
    </div>
    
    
      <!-- copyright -->
      
    <footer class="article-footer">
      
      

    </footer>

  </div>

  

  

  
  
  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/">上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2020
        <i class="ri-heart-fill heart_icon"></i> Longqian Huang
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <span class="division">|</span>
        Theme - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/cat.png" alt="Peter&#39;s Blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/Projects">Projects</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/Notes">Notes</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="http://c01dkit.com" target="_blank" rel="noopener">友链</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Subtitle -->

<script>
  try {
    var typed = new Typed("#subtitle", {
      strings: ['Mathematics, Computer Science, Physics . . .', '', ''],
      startDelay: 0,
      typeSpeed: 250,
      loop: true,
      backSpeed: false,
      showCursor: true
    });
  } catch (err) {
    console.log(err)
  }
</script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true
  }
</script>

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>



    
  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            displayMath: [ ['$','$'], ["\\[","\\]"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js"></script>


<!-- <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['

</html>,'

</html>], ["\\(","\\)"] ],
      displayMath: [ ['$','$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js"></script> --><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>

</html>